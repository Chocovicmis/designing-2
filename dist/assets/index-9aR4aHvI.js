function ev(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Lf={exports:{}},Ga={},Uf={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oi=Symbol.for("react.element"),rv=Symbol.for("react.portal"),sv=Symbol.for("react.fragment"),iv=Symbol.for("react.strict_mode"),av=Symbol.for("react.profiler"),ov=Symbol.for("react.provider"),lv=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),dv=Symbol.for("react.memo"),hv=Symbol.for("react.lazy"),Od=Symbol.iterator;function fv(t){return t===null||typeof t!="object"?null:(t=Od&&t[Od]||t["@@iterator"],typeof t=="function"?t:null)}var Df={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ff=Object.assign,Mf={};function Jr(t,e,n){this.props=t,this.context=e,this.refs=Mf,this.updater=n||Df}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bf(){}Bf.prototype=Jr.prototype;function qu(t,e,n){this.props=t,this.context=e,this.refs=Mf,this.updater=n||Df}var Ku=qu.prototype=new Bf;Ku.constructor=qu;Ff(Ku,Jr.prototype);Ku.isPureReactComponent=!0;var Ad=Array.isArray,zf=Object.prototype.hasOwnProperty,Ju={current:null},Wf={key:!0,ref:!0,__self:!0,__source:!0};function Hf(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)zf.call(e,r)&&!Wf.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:oi,type:t,key:i,ref:a,props:s,_owner:Ju.current}}function pv(t,e){return{$$typeof:oi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gu(t){return typeof t=="object"&&t!==null&&t.$$typeof===oi}function mv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Td=/\/+/g;function jo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mv(""+t.key):e.toString(36)}function Yi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case oi:case rv:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+jo(a,0):r,Ad(s)?(n="",t!=null&&(n=t.replace(Td,"$&/")+"/"),Yi(s,e,n,"",function(u){return u})):s!=null&&(Gu(s)&&(s=pv(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Td,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Ad(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+jo(i,o);a+=Yi(i,e,n,l,s)}else if(l=fv(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+jo(i,o++),a+=Yi(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ki(t,e,n){if(t==null)return t;var r=[],s=0;return Yi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function gv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},Zi={transition:null},yv={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Zi,ReactCurrentOwner:Ju};function Vf(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:ki,forEach:function(t,e,n){ki(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ki(t,function(){e++}),e},toArray:function(t){return ki(t,function(e){return e})||[]},only:function(t){if(!Gu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Jr;W.Fragment=sv;W.Profiler=av;W.PureComponent=qu;W.StrictMode=iv;W.Suspense=cv;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yv;W.act=Vf;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ff({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ju.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)zf.call(e,l)&&!Wf.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:oi,type:t.type,key:s,ref:i,props:r,_owner:a}};W.createContext=function(t){return t={$$typeof:lv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ov,_context:t},t.Consumer=t};W.createElement=Hf;W.createFactory=function(t){var e=Hf.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:uv,render:t}};W.isValidElement=Gu;W.lazy=function(t){return{$$typeof:hv,_payload:{_status:-1,_result:t},_init:gv}};W.memo=function(t,e){return{$$typeof:dv,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=Zi.transition;Zi.transition={};try{t()}finally{Zi.transition=e}};W.unstable_act=Vf;W.useCallback=function(t,e){return je.current.useCallback(t,e)};W.useContext=function(t){return je.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return je.current.useDeferredValue(t)};W.useEffect=function(t,e){return je.current.useEffect(t,e)};W.useId=function(){return je.current.useId()};W.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return je.current.useMemo(t,e)};W.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};W.useRef=function(t){return je.current.useRef(t)};W.useState=function(t){return je.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return je.current.useTransition()};W.version="18.3.1";Uf.exports=W;var b=Uf.exports;const qf=tv(b),vv=ev({__proto__:null,default:qf},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=b,_v=Symbol.for("react.element"),Sv=Symbol.for("react.fragment"),Ev=Object.prototype.hasOwnProperty,kv=wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xv={key:!0,ref:!0,__self:!0,__source:!0};function Kf(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ev.call(e,r)&&!xv.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_v,type:t,key:i,ref:a,props:s,_owner:kv.current}}Ga.Fragment=Sv;Ga.jsx=Kf;Ga.jsxs=Kf;Lf.exports=Ga;var S=Lf.exports,bl={},Jf={exports:{}},Ye={},Gf={exports:{}},Qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var I=O.length;O.push(B);e:for(;0<I;){var P=I-1>>>1,D=O[P];if(0<s(D,B))O[P]=B,O[I]=D,I=P;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],I=O.pop();if(I!==B){O[0]=I;e:for(var P=0,D=O.length,ye=D>>>1;P<ye;){var H=2*(P+1)-1,We=O[H],Tt=H+1,tr=O[Tt];if(0>s(We,I))Tt<D&&0>s(tr,We)?(O[P]=tr,O[Tt]=I,P=Tt):(O[P]=We,O[H]=I,P=H);else if(Tt<D&&0>s(tr,I))O[P]=tr,O[Tt]=I,P=Tt;else break e}}return B}function s(O,B){var I=O.sortIndex-B.sortIndex;return I!==0?I:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,m=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function _(O){if(y=!1,p(O),!v)if(n(l)!==null)v=!0,rs(x);else{var B=n(u);B!==null&&er(_,B.startTime-O)}}function x(O,B){v=!1,y&&(y=!1,g(R),R=-1),m=!0;var I=h;try{for(p(B),d=n(l);d!==null&&(!(d.expirationTime>B)||O&&!z());){var P=d.callback;if(typeof P=="function"){d.callback=null,h=d.priorityLevel;var D=P(d.expirationTime<=B);B=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(l)&&r(l),p(B)}else r(l);d=n(l)}if(d!==null)var ye=!0;else{var H=n(u);H!==null&&er(_,H.startTime-B),ye=!1}return ye}finally{d=null,h=I,m=!1}}var k=!1,E=null,R=-1,$=5,T=-1;function z(){return!(t.unstable_now()-T<$)}function ae(){if(E!==null){var O=t.unstable_now();T=O;var B=!0;try{B=E(!0,O)}finally{B?lt():(k=!1,E=null)}}else k=!1}var lt;if(typeof f=="function")lt=function(){f(ae)};else if(typeof MessageChannel<"u"){var Yn=new MessageChannel,Zn=Yn.port2;Yn.port1.onmessage=ae,lt=function(){Zn.postMessage(null)}}else lt=function(){w(ae,0)};function rs(O){E=O,k||(k=!0,lt())}function er(O,B){R=w(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,rs(x))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var I=h;h=B;try{return O()}finally{h=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var I=h;h=O;try{return B()}finally{h=I}},t.unstable_scheduleCallback=function(O,B,I){var P=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?P+I:P):I=P,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=I+D,O={id:c++,callback:B,priorityLevel:O,startTime:I,expirationTime:D,sortIndex:-1},I>P?(O.sortIndex=I,e(u,O),n(l)===null&&O===n(u)&&(y?(g(R),R=-1):y=!0,er(_,I-P))):(O.sortIndex=D,e(l,O),v||m||(v=!0,rs(x))),O},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(O){var B=h;return function(){var I=h;h=B;try{return O.apply(this,arguments)}finally{h=I}}}})(Qf);Gf.exports=Qf;var bv=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=b,Xe=bv;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xf=new Set,Ds={};function Kn(t,e){Mr(t,e),Mr(t+"Capture",e)}function Mr(t,e){for(Ds[t]=e,t=0;t<e.length;t++)Xf.add(e[t])}var Mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cl=Object.prototype.hasOwnProperty,Pv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Id={},jd={};function Rv(t){return Cl.call(jd,t)?!0:Cl.call(Id,t)?!1:Pv.test(t)?jd[t]=!0:(Id[t]=!0,!1)}function Ov(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Av(t,e,n,r){if(e===null||typeof e>"u"||Ov(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qu=/[\-:]([a-z])/g;function Xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qu,Xu);xe[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qu,Xu);xe[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qu,Xu);xe[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yu(t,e,n,r){var s=xe.hasOwnProperty(e)?xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Av(e,n,s,r)&&(n=null),r||s===null?Rv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ht=Cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xi=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Zu=Symbol.for("react.strict_mode"),Pl=Symbol.for("react.profiler"),Yf=Symbol.for("react.provider"),Zf=Symbol.for("react.context"),ec=Symbol.for("react.forward_ref"),Rl=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),tc=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),ep=Symbol.for("react.offscreen"),$d=Symbol.iterator;function ss(t){return t===null||typeof t!="object"?null:(t=$d&&t[$d]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,$o;function fs(t){if($o===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$o=e&&e[1]||""}return`
`+$o+t}var No=!1;function Lo(t,e){if(!t||No)return"";No=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{No=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fs(t):""}function Tv(t){switch(t.tag){case 5:return fs(t.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 2:case 15:return t=Lo(t.type,!1),t;case 11:return t=Lo(t.type.render,!1),t;case 1:return t=Lo(t.type,!0),t;default:return""}}function Al(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vr:return"Fragment";case yr:return"Portal";case Pl:return"Profiler";case Zu:return"StrictMode";case Rl:return"Suspense";case Ol:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zf:return(t.displayName||"Context")+".Consumer";case Yf:return(t._context.displayName||"Context")+".Provider";case ec:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tc:return e=t.displayName||null,e!==null?e:Al(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return Al(t(e))}catch{}}return null}function Iv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(e);case 8:return e===Zu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jv(t){var e=tp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bi(t){t._valueTracker||(t._valueTracker=jv(t))}function np(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tl(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rp(t,e){e=e.checked,e!=null&&Yu(t,"checked",e,!1)}function Il(t,e){rp(t,e);var n=yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jl(t,e.type,n):e.hasOwnProperty("defaultValue")&&jl(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ld(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jl(t,e,n){(e!=="number"||ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ps=Array.isArray;function Ar(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $l(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ud(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(ps(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function sp(t,e){var n=yn(e.value),r=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ip(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ip(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ci,ap=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ci=Ci||document.createElement("div"),Ci.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ci.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$v=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(t){$v.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xs[e]=xs[t]})});function op(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xs.hasOwnProperty(t)&&xs[t]?(""+e).trim():e+"px"}function lp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=op(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Nv=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(t,e){if(e){if(Nv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Ul(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dl=null;function nc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fl=null,Tr=null,Ir=null;function Fd(t){if(t=ci(t)){if(typeof Fl!="function")throw Error(C(280));var e=t.stateNode;e&&(e=eo(e),Fl(t.stateNode,t.type,e))}}function up(t){Tr?Ir?Ir.push(t):Ir=[t]:Tr=t}function cp(){if(Tr){var t=Tr,e=Ir;if(Ir=Tr=null,Fd(t),e)for(t=0;t<e.length;t++)Fd(e[t])}}function dp(t,e){return t(e)}function hp(){}var Uo=!1;function fp(t,e,n){if(Uo)return t(e,n);Uo=!0;try{return dp(t,e,n)}finally{Uo=!1,(Tr!==null||Ir!==null)&&(hp(),cp())}}function Ms(t,e){var n=t.stateNode;if(n===null)return null;var r=eo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var Ml=!1;if(Mt)try{var is={};Object.defineProperty(is,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Ml=!1}function Lv(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var bs=!1,ya=null,va=!1,Bl=null,Uv={onError:function(t){bs=!0,ya=t}};function Dv(t,e,n,r,s,i,a,o,l){bs=!1,ya=null,Lv.apply(Uv,arguments)}function Fv(t,e,n,r,s,i,a,o,l){if(Dv.apply(this,arguments),bs){if(bs){var u=ya;bs=!1,ya=null}else throw Error(C(198));va||(va=!0,Bl=u)}}function Jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Md(t){if(Jn(t)!==t)throw Error(C(188))}function Mv(t){var e=t.alternate;if(!e){if(e=Jn(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Md(s),t;if(i===r)return Md(s),e;i=i.sibling}throw Error(C(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function mp(t){return t=Mv(t),t!==null?gp(t):null}function gp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gp(t);if(e!==null)return e;t=t.sibling}return null}var yp=Xe.unstable_scheduleCallback,Bd=Xe.unstable_cancelCallback,Bv=Xe.unstable_shouldYield,zv=Xe.unstable_requestPaint,ie=Xe.unstable_now,Wv=Xe.unstable_getCurrentPriorityLevel,rc=Xe.unstable_ImmediatePriority,vp=Xe.unstable_UserBlockingPriority,wa=Xe.unstable_NormalPriority,Hv=Xe.unstable_LowPriority,wp=Xe.unstable_IdlePriority,Qa=null,Ot=null;function Vv(t){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Qa,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Jv,qv=Math.log,Kv=Math.LN2;function Jv(t){return t>>>=0,t===0?32:31-(qv(t)/Kv|0)|0}var Pi=64,Ri=4194304;function ms(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _a(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=ms(o):(i&=a,i!==0&&(r=ms(i)))}else a=n&~s,a!==0?r=ms(a):i!==0&&(r=ms(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),s=1<<n,r|=t[n],e&=~s;return r}function Gv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-vt(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=Gv(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function zl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _p(){var t=Pi;return Pi<<=1,!(Pi&4194240)&&(Pi=64),t}function Do(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function li(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function Xv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var q=0;function Sp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ep,ic,kp,xp,bp,Wl=!1,Oi=[],on=null,ln=null,un=null,Bs=new Map,zs=new Map,Zt=[],Yv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zd(t,e){switch(t){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":Bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function as(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ci(e),e!==null&&ic(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Zv(t,e,n,r,s){switch(e){case"focusin":return on=as(on,t,e,n,r,s),!0;case"dragenter":return ln=as(ln,t,e,n,r,s),!0;case"mouseover":return un=as(un,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bs.set(i,as(Bs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zs.set(i,as(zs.get(i)||null,t,e,n,r,s)),!0}return!1}function Cp(t){var e=$n(t.target);if(e!==null){var n=Jn(e);if(n!==null){if(e=n.tag,e===13){if(e=pp(n),e!==null){t.blockedOn=e,bp(t.priority,function(){kp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dl=r,n.target.dispatchEvent(r),Dl=null}else return e=ci(n),e!==null&&ic(e),t.blockedOn=n,!1;e.shift()}return!0}function Wd(t,e,n){ea(t)&&n.delete(e)}function ew(){Wl=!1,on!==null&&ea(on)&&(on=null),ln!==null&&ea(ln)&&(ln=null),un!==null&&ea(un)&&(un=null),Bs.forEach(Wd),zs.forEach(Wd)}function os(t,e){t.blockedOn===e&&(t.blockedOn=null,Wl||(Wl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,ew)))}function Ws(t){function e(s){return os(s,t)}if(0<Oi.length){os(Oi[0],t);for(var n=1;n<Oi.length;n++){var r=Oi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(on!==null&&os(on,t),ln!==null&&os(ln,t),un!==null&&os(un,t),Bs.forEach(e),zs.forEach(e),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Cp(n),n.blockedOn===null&&Zt.shift()}var jr=Ht.ReactCurrentBatchConfig,Sa=!0;function tw(t,e,n,r){var s=q,i=jr.transition;jr.transition=null;try{q=1,ac(t,e,n,r)}finally{q=s,jr.transition=i}}function nw(t,e,n,r){var s=q,i=jr.transition;jr.transition=null;try{q=4,ac(t,e,n,r)}finally{q=s,jr.transition=i}}function ac(t,e,n,r){if(Sa){var s=Hl(t,e,n,r);if(s===null)Jo(t,e,r,Ea,n),zd(t,r);else if(Zv(s,t,e,n,r))r.stopPropagation();else if(zd(t,r),e&4&&-1<Yv.indexOf(t)){for(;s!==null;){var i=ci(s);if(i!==null&&Ep(i),i=Hl(t,e,n,r),i===null&&Jo(t,e,r,Ea,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jo(t,e,r,null,n)}}var Ea=null;function Hl(t,e,n,r){if(Ea=null,t=nc(r),t=$n(t),t!==null)if(e=Jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ea=t,null}function Pp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wv()){case rc:return 1;case vp:return 4;case wa:case Hv:return 16;case wp:return 536870912;default:return 16}default:return 16}}var rn=null,oc=null,ta=null;function Rp(){if(ta)return ta;var t,e=oc,n=e.length,r,s="value"in rn?rn.value:rn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ta=s.slice(t,1<r?1-r:void 0)}function na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ai(){return!0}function Hd(){return!1}function Ze(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ai:Hd,this.isPropagationStopped=Hd,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),e}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Ze(Gr),ui=ne({},Gr,{view:0,detail:0}),rw=Ze(ui),Fo,Mo,ls,Xa=ne({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ls&&(ls&&t.type==="mousemove"?(Fo=t.screenX-ls.screenX,Mo=t.screenY-ls.screenY):Mo=Fo=0,ls=t),Fo)},movementY:function(t){return"movementY"in t?t.movementY:Mo}}),Vd=Ze(Xa),sw=ne({},Xa,{dataTransfer:0}),iw=Ze(sw),aw=ne({},ui,{relatedTarget:0}),Bo=Ze(aw),ow=ne({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),lw=Ze(ow),uw=ne({},Gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cw=Ze(uw),dw=ne({},Gr,{data:0}),qd=Ze(dw),hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pw[t])?!!e[t]:!1}function uc(){return mw}var gw=ne({},ui,{key:function(t){if(t.key){var e=hw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yw=Ze(gw),vw=ne({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=Ze(vw),ww=ne({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),_w=Ze(ww),Sw=ne({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ew=Ze(Sw),kw=ne({},Xa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xw=Ze(kw),bw=[9,13,27,32],cc=Mt&&"CompositionEvent"in window,Cs=null;Mt&&"documentMode"in document&&(Cs=document.documentMode);var Cw=Mt&&"TextEvent"in window&&!Cs,Op=Mt&&(!cc||Cs&&8<Cs&&11>=Cs),Jd=" ",Gd=!1;function Ap(t,e){switch(t){case"keyup":return bw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wr=!1;function Pw(t,e){switch(t){case"compositionend":return Tp(e);case"keypress":return e.which!==32?null:(Gd=!0,Jd);case"textInput":return t=e.data,t===Jd&&Gd?null:t;default:return null}}function Rw(t,e){if(wr)return t==="compositionend"||!cc&&Ap(t,e)?(t=Rp(),ta=oc=rn=null,wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Op&&e.locale!=="ko"?null:e.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ow[t.type]:e==="textarea"}function Ip(t,e,n,r){up(r),e=ka(e,"onChange"),0<e.length&&(n=new lc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ps=null,Hs=null;function Aw(t){Wp(t,0)}function Ya(t){var e=Er(t);if(np(e))return t}function Tw(t,e){if(t==="change")return e}var jp=!1;if(Mt){var zo;if(Mt){var Wo="oninput"in document;if(!Wo){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),Wo=typeof Xd.oninput=="function"}zo=Wo}else zo=!1;jp=zo&&(!document.documentMode||9<document.documentMode)}function Yd(){Ps&&(Ps.detachEvent("onpropertychange",$p),Hs=Ps=null)}function $p(t){if(t.propertyName==="value"&&Ya(Hs)){var e=[];Ip(e,Hs,t,nc(t)),fp(Aw,e)}}function Iw(t,e,n){t==="focusin"?(Yd(),Ps=e,Hs=n,Ps.attachEvent("onpropertychange",$p)):t==="focusout"&&Yd()}function jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ya(Hs)}function $w(t,e){if(t==="click")return Ya(e)}function Nw(t,e){if(t==="input"||t==="change")return Ya(e)}function Lw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _t=typeof Object.is=="function"?Object.is:Lw;function Vs(t,e){if(_t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cl.call(e,s)||!_t(t[s],e[s]))return!1}return!0}function Zd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eh(t,e){var n=Zd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zd(n)}}function Np(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Np(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lp(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ga(t.document)}return e}function dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uw(t){var e=Lp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Np(n.ownerDocument.documentElement,n)){if(r!==null&&dc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=eh(n,i);var a=eh(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dw=Mt&&"documentMode"in document&&11>=document.documentMode,_r=null,Vl=null,Rs=null,ql=!1;function th(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ql||_r==null||_r!==ga(r)||(r=_r,"selectionStart"in r&&dc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rs&&Vs(Rs,r)||(Rs=r,r=ka(Vl,"onSelect"),0<r.length&&(e=new lc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_r)))}function Ti(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sr={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},Ho={},Up={};Mt&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Za(t){if(Ho[t])return Ho[t];if(!Sr[t])return t;var e=Sr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Up)return Ho[t]=e[n];return t}var Dp=Za("animationend"),Fp=Za("animationiteration"),Mp=Za("animationstart"),Bp=Za("transitionend"),zp=new Map,nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(t,e){zp.set(t,e),Kn(e,[t])}for(var Vo=0;Vo<nh.length;Vo++){var qo=nh[Vo],Fw=qo.toLowerCase(),Mw=qo[0].toUpperCase()+qo.slice(1);wn(Fw,"on"+Mw)}wn(Dp,"onAnimationEnd");wn(Fp,"onAnimationIteration");wn(Mp,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(Bp,"onTransitionEnd");Mr("onMouseEnter",["mouseout","mouseover"]);Mr("onMouseLeave",["mouseout","mouseover"]);Mr("onPointerEnter",["pointerout","pointerover"]);Mr("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function rh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fv(r,e,void 0,t),t.currentTarget=null}function Wp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;rh(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;rh(s,o,u),i=l}}}if(va)throw t=Bl,va=!1,Bl=null,t}function Q(t,e){var n=e[Xl];n===void 0&&(n=e[Xl]=new Set);var r=t+"__bubble";n.has(r)||(Hp(e,t,2,!1),n.add(r))}function Ko(t,e,n){var r=0;e&&(r|=4),Hp(n,t,r,e)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[Ii]){t[Ii]=!0,Xf.forEach(function(n){n!=="selectionchange"&&(Bw.has(n)||Ko(n,!1,t),Ko(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ii]||(e[Ii]=!0,Ko("selectionchange",!1,e))}}function Hp(t,e,n,r){switch(Pp(e)){case 1:var s=tw;break;case 4:s=nw;break;default:s=ac}n=s.bind(null,e,n,t),s=void 0,!Ml||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Jo(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=$n(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}fp(function(){var u=i,c=nc(n),d=[];e:{var h=zp.get(t);if(h!==void 0){var m=lc,v=t;switch(t){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":m=yw;break;case"focusin":v="focus",m=Bo;break;case"focusout":v="blur",m=Bo;break;case"beforeblur":case"afterblur":m=Bo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_w;break;case Dp:case Fp:case Mp:m=lw;break;case Bp:m=Ew;break;case"scroll":m=rw;break;case"wheel":m=xw;break;case"copy":case"cut":case"paste":m=cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Kd}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var f=u,p;f!==null;){p=f;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,g!==null&&(_=Ms(f,g),_!=null&&y.push(Ks(f,_,p)))),w)break;f=f.return}0<y.length&&(h=new m(h,v,null,n,c),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Dl&&(v=n.relatedTarget||n.fromElement)&&($n(v)||v[Bt]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?$n(v):null,v!==null&&(w=Jn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(y=Vd,_="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(y=Kd,_="onPointerLeave",g="onPointerEnter",f="pointer"),w=m==null?h:Er(m),p=v==null?h:Er(v),h=new y(_,f+"leave",m,n,c),h.target=w,h.relatedTarget=p,_=null,$n(c)===u&&(y=new y(g,f+"enter",v,n,c),y.target=p,y.relatedTarget=w,_=y),w=_,m&&v)t:{for(y=m,g=v,f=0,p=y;p;p=nr(p))f++;for(p=0,_=g;_;_=nr(_))p++;for(;0<f-p;)y=nr(y),f--;for(;0<p-f;)g=nr(g),p--;for(;f--;){if(y===g||g!==null&&y===g.alternate)break t;y=nr(y),g=nr(g)}y=null}else y=null;m!==null&&sh(d,h,m,y,!1),v!==null&&w!==null&&sh(d,w,v,y,!0)}}e:{if(h=u?Er(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var x=Tw;else if(Qd(h))if(jp)x=Nw;else{x=jw;var k=Iw}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=$w);if(x&&(x=x(t,u))){Ip(d,x,n,c);break e}k&&k(t,h,u),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&jl(h,"number",h.value)}switch(k=u?Er(u):window,t){case"focusin":(Qd(k)||k.contentEditable==="true")&&(_r=k,Vl=u,Rs=null);break;case"focusout":Rs=Vl=_r=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,th(d,n,c);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":th(d,n,c)}var E;if(cc)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else wr?Ap(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Op&&n.locale!=="ko"&&(wr||R!=="onCompositionStart"?R==="onCompositionEnd"&&wr&&(E=Rp()):(rn=c,oc="value"in rn?rn.value:rn.textContent,wr=!0)),k=ka(u,R),0<k.length&&(R=new qd(R,t,null,n,c),d.push({event:R,listeners:k}),E?R.data=E:(E=Tp(n),E!==null&&(R.data=E)))),(E=Cw?Pw(t,n):Rw(t,n))&&(u=ka(u,"onBeforeInput"),0<u.length&&(c=new qd("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}Wp(d,e)})}function Ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ms(t,n),i!=null&&r.unshift(Ks(t,i,s)),i=Ms(t,e),i!=null&&r.push(Ks(t,i,s))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sh(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=Ms(n,i),l!=null&&a.unshift(Ks(n,l,o))):s||(l=Ms(n,i),l!=null&&a.push(Ks(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var zw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function ih(t){return(typeof t=="string"?t:""+t).replace(zw,`
`).replace(Ww,"")}function ji(t,e,n){if(e=ih(e),ih(t)!==e&&n)throw Error(C(425))}function xa(){}var Kl=null,Jl=null;function Gl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(t){return ah.resolve(null).then(t).catch(qw)}:Ql;function qw(t){setTimeout(function(){throw t})}function Go(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ws(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ws(e)}function cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Qr,Js="__reactProps$"+Qr,Bt="__reactContainer$"+Qr,Xl="__reactEvents$"+Qr,Kw="__reactListeners$"+Qr,Jw="__reactHandles$"+Qr;function $n(t){var e=t[Pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bt]||n[Pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oh(t);t!==null;){if(n=t[Pt])return n;t=oh(t)}return e}t=n,n=t.parentNode}return null}function ci(t){return t=t[Pt]||t[Bt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function eo(t){return t[Js]||null}var Yl=[],kr=-1;function _n(t){return{current:t}}function X(t){0>kr||(t.current=Yl[kr],Yl[kr]=null,kr--)}function G(t,e){kr++,Yl[kr]=t.current,t.current=e}var vn={},Ae=_n(vn),Me=_n(!1),Bn=vn;function Br(t,e){var n=t.type.contextTypes;if(!n)return vn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Be(t){return t=t.childContextTypes,t!=null}function ba(){X(Me),X(Ae)}function lh(t,e,n){if(Ae.current!==vn)throw Error(C(168));G(Ae,e),G(Me,n)}function Vp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(C(108,Iv(t)||"Unknown",s));return ne({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vn,Bn=Ae.current,G(Ae,t),G(Me,Me.current),!0}function uh(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=Vp(t,e,Bn),r.__reactInternalMemoizedMergedChildContext=t,X(Me),X(Ae),G(Ae,t)):X(Me),G(Me,n)}var Lt=null,to=!1,Qo=!1;function qp(t){Lt===null?Lt=[t]:Lt.push(t)}function Gw(t){to=!0,qp(t)}function Sn(){if(!Qo&&Lt!==null){Qo=!0;var t=0,e=q;try{var n=Lt;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lt=null,to=!1}catch(s){throw Lt!==null&&(Lt=Lt.slice(t+1)),yp(rc,Sn),s}finally{q=e,Qo=!1}}return null}var xr=[],br=0,Pa=null,Ra=0,et=[],tt=0,zn=null,Ut=1,Dt="";function Rn(t,e){xr[br++]=Ra,xr[br++]=Pa,Pa=t,Ra=e}function Kp(t,e,n){et[tt++]=Ut,et[tt++]=Dt,et[tt++]=zn,zn=t;var r=Ut;t=Dt;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var i=32-vt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ut=1<<32-vt(e)+s|n<<s|r,Dt=i+t}else Ut=1<<i|n<<s|r,Dt=t}function hc(t){t.return!==null&&(Rn(t,1),Kp(t,1,0))}function fc(t){for(;t===Pa;)Pa=xr[--br],xr[br]=null,Ra=xr[--br],xr[br]=null;for(;t===zn;)zn=et[--tt],et[tt]=null,Dt=et[--tt],et[tt]=null,Ut=et[--tt],et[tt]=null}var Qe=null,Ge=null,Y=!1,gt=null;function Jp(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ch(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zn!==null?{id:Ut,overflow:Dt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qe=t,Ge=null,!0):!1;default:return!1}}function Zl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eu(t){if(Y){var e=Ge;if(e){var n=e;if(!ch(t,e)){if(Zl(t))throw Error(C(418));e=cn(n.nextSibling);var r=Qe;e&&ch(t,e)?Jp(r,n):(t.flags=t.flags&-4097|2,Y=!1,Qe=t)}}else{if(Zl(t))throw Error(C(418));t.flags=t.flags&-4097|2,Y=!1,Qe=t}}}function dh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function $i(t){if(t!==Qe)return!1;if(!Y)return dh(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gl(t.type,t.memoizedProps)),e&&(e=Ge)){if(Zl(t))throw Gp(),Error(C(418));for(;e;)Jp(t,e),e=cn(e.nextSibling)}if(dh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Qe?cn(t.stateNode.nextSibling):null;return!0}function Gp(){for(var t=Ge;t;)t=cn(t.nextSibling)}function zr(){Ge=Qe=null,Y=!1}function pc(t){gt===null?gt=[t]:gt.push(t)}var Qw=Ht.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Ni(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hh(t){var e=t._init;return e(t._payload)}function Qp(t){function e(g,f){if(t){var p=g.deletions;p===null?(g.deletions=[f],g.flags|=16):p.push(f)}}function n(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=pn(g,f),g.index=0,g.sibling=null,g}function i(g,f,p){return g.index=p,t?(p=g.alternate,p!==null?(p=p.index,p<f?(g.flags|=2,f):p):(g.flags|=2,f)):(g.flags|=1048576,f)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,f,p,_){return f===null||f.tag!==6?(f=rl(p,g.mode,_),f.return=g,f):(f=s(f,p),f.return=g,f)}function l(g,f,p,_){var x=p.type;return x===vr?c(g,f,p.props.children,_,p.key):f!==null&&(f.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Xt&&hh(x)===f.type)?(_=s(f,p.props),_.ref=us(g,f,p),_.return=g,_):(_=ua(p.type,p.key,p.props,null,g.mode,_),_.ref=us(g,f,p),_.return=g,_)}function u(g,f,p,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=sl(p,g.mode,_),f.return=g,f):(f=s(f,p.children||[]),f.return=g,f)}function c(g,f,p,_,x){return f===null||f.tag!==7?(f=Mn(p,g.mode,_,x),f.return=g,f):(f=s(f,p),f.return=g,f)}function d(g,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=rl(""+f,g.mode,p),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case xi:return p=ua(f.type,f.key,f.props,null,g.mode,p),p.ref=us(g,null,f),p.return=g,p;case yr:return f=sl(f,g.mode,p),f.return=g,f;case Xt:var _=f._init;return d(g,_(f._payload),p)}if(ps(f)||ss(f))return f=Mn(f,g.mode,p,null),f.return=g,f;Ni(g,f)}return null}function h(g,f,p,_){var x=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return x!==null?null:o(g,f,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xi:return p.key===x?l(g,f,p,_):null;case yr:return p.key===x?u(g,f,p,_):null;case Xt:return x=p._init,h(g,f,x(p._payload),_)}if(ps(p)||ss(p))return x!==null?null:c(g,f,p,_,null);Ni(g,p)}return null}function m(g,f,p,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(p)||null,o(f,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xi:return g=g.get(_.key===null?p:_.key)||null,l(f,g,_,x);case yr:return g=g.get(_.key===null?p:_.key)||null,u(f,g,_,x);case Xt:var k=_._init;return m(g,f,p,k(_._payload),x)}if(ps(_)||ss(_))return g=g.get(p)||null,c(f,g,_,x,null);Ni(f,_)}return null}function v(g,f,p,_){for(var x=null,k=null,E=f,R=f=0,$=null;E!==null&&R<p.length;R++){E.index>R?($=E,E=null):$=E.sibling;var T=h(g,E,p[R],_);if(T===null){E===null&&(E=$);break}t&&E&&T.alternate===null&&e(g,E),f=i(T,f,R),k===null?x=T:k.sibling=T,k=T,E=$}if(R===p.length)return n(g,E),Y&&Rn(g,R),x;if(E===null){for(;R<p.length;R++)E=d(g,p[R],_),E!==null&&(f=i(E,f,R),k===null?x=E:k.sibling=E,k=E);return Y&&Rn(g,R),x}for(E=r(g,E);R<p.length;R++)$=m(E,g,R,p[R],_),$!==null&&(t&&$.alternate!==null&&E.delete($.key===null?R:$.key),f=i($,f,R),k===null?x=$:k.sibling=$,k=$);return t&&E.forEach(function(z){return e(g,z)}),Y&&Rn(g,R),x}function y(g,f,p,_){var x=ss(p);if(typeof x!="function")throw Error(C(150));if(p=x.call(p),p==null)throw Error(C(151));for(var k=x=null,E=f,R=f=0,$=null,T=p.next();E!==null&&!T.done;R++,T=p.next()){E.index>R?($=E,E=null):$=E.sibling;var z=h(g,E,T.value,_);if(z===null){E===null&&(E=$);break}t&&E&&z.alternate===null&&e(g,E),f=i(z,f,R),k===null?x=z:k.sibling=z,k=z,E=$}if(T.done)return n(g,E),Y&&Rn(g,R),x;if(E===null){for(;!T.done;R++,T=p.next())T=d(g,T.value,_),T!==null&&(f=i(T,f,R),k===null?x=T:k.sibling=T,k=T);return Y&&Rn(g,R),x}for(E=r(g,E);!T.done;R++,T=p.next())T=m(E,g,R,T.value,_),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?R:T.key),f=i(T,f,R),k===null?x=T:k.sibling=T,k=T);return t&&E.forEach(function(ae){return e(g,ae)}),Y&&Rn(g,R),x}function w(g,f,p,_){if(typeof p=="object"&&p!==null&&p.type===vr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case xi:e:{for(var x=p.key,k=f;k!==null;){if(k.key===x){if(x=p.type,x===vr){if(k.tag===7){n(g,k.sibling),f=s(k,p.props.children),f.return=g,g=f;break e}}else if(k.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Xt&&hh(x)===k.type){n(g,k.sibling),f=s(k,p.props),f.ref=us(g,k,p),f.return=g,g=f;break e}n(g,k);break}else e(g,k);k=k.sibling}p.type===vr?(f=Mn(p.props.children,g.mode,_,p.key),f.return=g,g=f):(_=ua(p.type,p.key,p.props,null,g.mode,_),_.ref=us(g,f,p),_.return=g,g=_)}return a(g);case yr:e:{for(k=p.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(g,f.sibling),f=s(f,p.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else e(g,f);f=f.sibling}f=sl(p,g.mode,_),f.return=g,g=f}return a(g);case Xt:return k=p._init,w(g,f,k(p._payload),_)}if(ps(p))return v(g,f,p,_);if(ss(p))return y(g,f,p,_);Ni(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(g,f.sibling),f=s(f,p),f.return=g,g=f):(n(g,f),f=rl(p,g.mode,_),f.return=g,g=f),a(g)):n(g,f)}return w}var Wr=Qp(!0),Xp=Qp(!1),Oa=_n(null),Aa=null,Cr=null,mc=null;function gc(){mc=Cr=Aa=null}function yc(t){var e=Oa.current;X(Oa),t._currentValue=e}function tu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $r(t,e){Aa=t,mc=Cr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function at(t){var e=t._currentValue;if(mc!==t)if(t={context:t,memoizedValue:e,next:null},Cr===null){if(Aa===null)throw Error(C(308));Cr=t,Aa.dependencies={lanes:0,firstContext:t}}else Cr=Cr.next=t;return e}var Nn=null;function vc(t){Nn===null?Nn=[t]:Nn.push(t)}function Yp(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vc(e)):(n.next=s.next,s.next=n),e.interleaved=n,zt(t,r)}function zt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yt=!1;function wc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zt(t,n)}return s=r.interleaved,s===null?(e.next=e,vc(r)):(e.next=s.next,s.next=e),r.interleaved=e,zt(t,n)}function ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sc(t,n)}}function fh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ta(t,e,n,r){var s=t.updateQueue;Yt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;a=0,c=u=l=null,o=i;do{var h=o.lane,m=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(h=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(m,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(m,d,h):v,h==null)break e;d=ne({},d,h);break e;case 2:Yt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hn|=a,t.lanes=a,t.memoizedState=d}}function ph(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(C(191,s));s.call(r)}}}var di={},At=_n(di),Gs=_n(di),Qs=_n(di);function Ln(t){if(t===di)throw Error(C(174));return t}function _c(t,e){switch(G(Qs,e),G(Gs,t),G(At,di),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nl(e,t)}X(At),G(At,e)}function Hr(){X(At),X(Gs),X(Qs)}function em(t){Ln(Qs.current);var e=Ln(At.current),n=Nl(e,t.type);e!==n&&(G(Gs,t),G(At,n))}function Sc(t){Gs.current===t&&(X(At),X(Gs))}var ee=_n(0);function Ia(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xo=[];function Ec(){for(var t=0;t<Xo.length;t++)Xo[t]._workInProgressVersionPrimary=null;Xo.length=0}var sa=Ht.ReactCurrentDispatcher,Yo=Ht.ReactCurrentBatchConfig,Wn=0,te=null,pe=null,we=null,ja=!1,Os=!1,Xs=0,Xw=0;function Ce(){throw Error(C(321))}function kc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_t(t[n],e[n]))return!1;return!0}function xc(t,e,n,r,s,i){if(Wn=i,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sa.current=t===null||t.memoizedState===null?t_:n_,t=n(r,s),Os){i=0;do{if(Os=!1,Xs=0,25<=i)throw Error(C(301));i+=1,we=pe=null,e.updateQueue=null,sa.current=r_,t=n(r,s)}while(Os)}if(sa.current=$a,e=pe!==null&&pe.next!==null,Wn=0,we=pe=te=null,ja=!1,e)throw Error(C(300));return t}function bc(){var t=Xs!==0;return Xs=0,t}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?te.memoizedState=we=t:we=we.next=t,we}function ot(){if(pe===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=we===null?te.memoizedState:we.next;if(e!==null)we=e,pe=t;else{if(t===null)throw Error(C(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},we===null?te.memoizedState=we=t:we=we.next=t}return we}function Ys(t,e){return typeof e=="function"?e(t):e}function Zo(t){var e=ot(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=pe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var c=u.lane;if((Wn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,te.lanes|=c,Hn|=c}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,_t(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,te.lanes|=i,Hn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function el(t){var e=ot(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);_t(i,e.memoizedState)||(Fe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tm(){}function nm(t,e){var n=te,r=ot(),s=e(),i=!_t(r.memoizedState,s);if(i&&(r.memoizedState=s,Fe=!0),r=r.queue,Cc(im.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,Zs(9,sm.bind(null,n,r,s,e),void 0,null),_e===null)throw Error(C(349));Wn&30||rm(n,e,s)}return s}function rm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sm(t,e,n,r){e.value=n,e.getSnapshot=r,am(e)&&om(t)}function im(t,e,n){return n(function(){am(e)&&om(t)})}function am(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_t(t,n)}catch{return!0}}function om(t){var e=zt(t,1);e!==null&&wt(e,t,1,-1)}function mh(t){var e=kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},e.queue=t,t=t.dispatch=e_.bind(null,te,t),[e.memoizedState,t]}function Zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lm(){return ot().memoizedState}function ia(t,e,n,r){var s=kt();te.flags|=t,s.memoizedState=Zs(1|e,n,void 0,r===void 0?null:r)}function no(t,e,n,r){var s=ot();r=r===void 0?null:r;var i=void 0;if(pe!==null){var a=pe.memoizedState;if(i=a.destroy,r!==null&&kc(r,a.deps)){s.memoizedState=Zs(e,n,i,r);return}}te.flags|=t,s.memoizedState=Zs(1|e,n,i,r)}function gh(t,e){return ia(8390656,8,t,e)}function Cc(t,e){return no(2048,8,t,e)}function um(t,e){return no(4,2,t,e)}function cm(t,e){return no(4,4,t,e)}function dm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hm(t,e,n){return n=n!=null?n.concat([t]):null,no(4,4,dm.bind(null,e,t),n)}function Pc(){}function fm(t,e){var n=ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pm(t,e){var n=ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mm(t,e,n){return Wn&21?(_t(n,e)||(n=_p(),te.lanes|=n,Hn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function Yw(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=Yo.transition;Yo.transition={};try{t(!1),e()}finally{q=n,Yo.transition=r}}function gm(){return ot().memoizedState}function Zw(t,e,n){var r=fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ym(t))vm(e,n);else if(n=Yp(t,e,n,r),n!==null){var s=Ie();wt(n,t,r,s),wm(n,e,r)}}function e_(t,e,n){var r=fn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ym(t))vm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,_t(o,a)){var l=e.interleaved;l===null?(s.next=s,vc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Yp(t,e,s,r),n!==null&&(s=Ie(),wt(n,t,r,s),wm(n,e,r))}}function ym(t){var e=t.alternate;return t===te||e!==null&&e===te}function vm(t,e){Os=ja=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sc(t,n)}}var $a={readContext:at,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},t_={readContext:at,useCallback:function(t,e){return kt().memoizedState=[t,e===void 0?null:e],t},useContext:at,useEffect:gh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ia(4194308,4,dm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return ia(4,2,t,e)},useMemo:function(t,e){var n=kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zw.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=kt();return t={current:t},e.memoizedState=t},useState:mh,useDebugValue:Pc,useDeferredValue:function(t){return kt().memoizedState=t},useTransition:function(){var t=mh(!1),e=t[0];return t=Yw.bind(null,t[1]),kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,s=kt();if(Y){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),_e===null)throw Error(C(349));Wn&30||rm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gh(im.bind(null,r,i,t),[t]),r.flags|=2048,Zs(9,sm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kt(),e=_e.identifierPrefix;if(Y){var n=Dt,r=Ut;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n_={readContext:at,useCallback:fm,useContext:at,useEffect:Cc,useImperativeHandle:hm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:Zo,useRef:lm,useState:function(){return Zo(Ys)},useDebugValue:Pc,useDeferredValue:function(t){var e=ot();return mm(e,pe.memoizedState,t)},useTransition:function(){var t=Zo(Ys)[0],e=ot().memoizedState;return[t,e]},useMutableSource:tm,useSyncExternalStore:nm,useId:gm,unstable_isNewReconciler:!1},r_={readContext:at,useCallback:fm,useContext:at,useEffect:Cc,useImperativeHandle:hm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:el,useRef:lm,useState:function(){return el(Ys)},useDebugValue:Pc,useDeferredValue:function(t){var e=ot();return pe===null?e.memoizedState=t:mm(e,pe.memoizedState,t)},useTransition:function(){var t=el(Ys)[0],e=ot().memoizedState;return[t,e]},useMutableSource:tm,useSyncExternalStore:nm,useId:gm,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ro={isMounted:function(t){return(t=t._reactInternals)?Jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=fn(t),i=Ft(r,s);i.payload=e,n!=null&&(i.callback=n),e=dn(t,i,s),e!==null&&(wt(e,t,s,r),ra(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=fn(t),i=Ft(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dn(t,i,s),e!==null&&(wt(e,t,s,r),ra(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=fn(t),s=Ft(n,r);s.tag=2,e!=null&&(s.callback=e),e=dn(t,s,r),e!==null&&(wt(e,t,r,n),ra(e,t,r))}};function yh(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vs(n,r)||!Vs(s,i):!0}function _m(t,e,n){var r=!1,s=vn,i=e.contextType;return typeof i=="object"&&i!==null?i=at(i):(s=Be(e)?Bn:Ae.current,r=e.contextTypes,i=(r=r!=null)?Br(t,s):vn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ro,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ro.enqueueReplaceState(e,e.state,null)}function ru(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=at(i):(i=Be(e)?Bn:Ae.current,s.context=Br(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ro.enqueueReplaceState(s,s.state,null),Ta(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vr(t,e){try{var n="",r=e;do n+=Tv(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function su(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var s_=typeof WeakMap=="function"?WeakMap:Map;function Sm(t,e,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){La||(La=!0,pu=r),su(t,e)},n}function Em(t,e,n){n=Ft(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){su(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){su(t,e),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new s_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=v_.bind(null,t,e,n),e.then(t,t))}function _h(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ft(-1,1),e.tag=2,dn(n,e,1))),n.lanes|=1),t)}var i_=Ht.ReactCurrentOwner,Fe=!1;function Te(t,e,n,r){e.child=t===null?Xp(e,null,n,r):Wr(e,t.child,n,r)}function Eh(t,e,n,r,s){n=n.render;var i=e.ref;return $r(e,s),r=xc(t,e,n,r,i,s),n=bc(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wt(t,e,s)):(Y&&n&&hc(e),e.flags|=1,Te(t,e,r,s),e.child)}function kh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Nc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,km(t,e,i,r,s)):(t=ua(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vs,n(a,r)&&t.ref===e.ref)return Wt(t,e,s)}return e.flags|=1,t=pn(i,r),t.ref=e.ref,t.return=e,e.child=t}function km(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vs(i,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Wt(t,e,s)}return iu(t,e,n,r,s)}function xm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(Rr,Je),Je|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(Rr,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,G(Rr,Je),Je|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,G(Rr,Je),Je|=r;return Te(t,e,s,n),e.child}function bm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iu(t,e,n,r,s){var i=Be(n)?Bn:Ae.current;return i=Br(e,i),$r(e,s),n=xc(t,e,n,r,i,s),r=bc(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wt(t,e,s)):(Y&&r&&hc(e),e.flags|=1,Te(t,e,n,s),e.child)}function xh(t,e,n,r,s){if(Be(n)){var i=!0;Ca(e)}else i=!1;if($r(e,s),e.stateNode===null)aa(t,e),_m(e,n,r),ru(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=at(u):(u=Be(n)?Bn:Ae.current,u=Br(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&vh(e,a,r,u),Yt=!1;var h=e.memoizedState;a.state=h,Ta(e,r,a,s),l=e.memoizedState,o!==r||h!==l||Me.current||Yt?(typeof c=="function"&&(nu(e,n,c,r),l=e.memoizedState),(o=Yt||yh(e,n,o,r,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Zp(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ht(e.type,o),a.props=u,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=at(l):(l=Be(n)?Bn:Ae.current,l=Br(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&vh(e,a,r,l),Yt=!1,h=e.memoizedState,a.state=h,Ta(e,r,a,s);var v=e.memoizedState;o!==d||h!==v||Me.current||Yt?(typeof m=="function"&&(nu(e,n,m,r),v=e.memoizedState),(u=Yt||yh(e,n,u,r,h,v,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return au(t,e,n,r,i,s)}function au(t,e,n,r,s,i){bm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&uh(e,n,!1),Wt(t,e,i);r=e.stateNode,i_.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Wr(e,t.child,null,i),e.child=Wr(e,null,o,i)):Te(t,e,o,i),e.memoizedState=r.state,s&&uh(e,n,!0),e.child}function Cm(t){var e=t.stateNode;e.pendingContext?lh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lh(t,e.context,!1),_c(t,e.containerInfo)}function bh(t,e,n,r,s){return zr(),pc(s),e.flags|=256,Te(t,e,n,r),e.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function lu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pm(t,e,n){var r=e.pendingProps,s=ee.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),G(ee,s&1),t===null)return eu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ao(a,r,0,null),t=Mn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lu(n),e.memoizedState=ou,t):Rc(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return a_(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=pn(o,i):(i=Mn(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?lu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=ou,r}return i=t.child,t=i.sibling,r=pn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rc(t,e){return e=ao({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Li(t,e,n,r){return r!==null&&pc(r),Wr(e,t.child,null,n),t=Rc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function a_(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=tl(Error(C(422))),Li(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ao({mode:"visible",children:r.children},s,0,null),i=Mn(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Wr(e,t.child,null,a),e.child.memoizedState=lu(a),e.memoizedState=ou,i);if(!(e.mode&1))return Li(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(C(419)),r=tl(i,r,void 0),Li(t,e,a,r)}if(o=(a&t.childLanes)!==0,Fe||o){if(r=_e,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zt(t,s),wt(r,t,s,-1))}return $c(),r=tl(Error(C(421))),Li(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=w_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ge=cn(s.nextSibling),Qe=e,Y=!0,gt=null,t!==null&&(et[tt++]=Ut,et[tt++]=Dt,et[tt++]=zn,Ut=t.id,Dt=t.overflow,zn=e),e=Rc(e,r.children),e.flags|=4096,e)}function Ch(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tu(t.return,e,n)}function nl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Rm(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Te(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ch(t,n,e);else if(t.tag===19)Ch(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ia(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ia(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nl(e,!0,n,null,i);break;case"together":nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=pn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o_(t,e,n){switch(e.tag){case 3:Cm(e),zr();break;case 5:em(e);break;case 1:Be(e.type)&&Ca(e);break;case 4:_c(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;G(Oa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Pm(t,e,n):(G(ee,ee.current&1),t=Wt(t,e,n),t!==null?t.sibling:null);G(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Rm(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),G(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,xm(t,e,n)}return Wt(t,e,n)}var Om,uu,Am,Tm;Om=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};Am=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ln(At.current);var i=null;switch(n){case"input":s=Tl(t,s),r=Tl(t,r),i=[];break;case"select":s=ne({},s,{value:void 0}),r=ne({},r,{value:void 0}),i=[];break;case"textarea":s=$l(t,s),r=$l(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xa)}Ll(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ds.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Q("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Tm=function(t,e,n,r){n!==r&&(e.flags|=4)};function cs(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function l_(t,e,n){var r=e.pendingProps;switch(fc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Be(e.type)&&ba(),Pe(e),null;case 3:return r=e.stateNode,Hr(),X(Me),X(Ae),Ec(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($i(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(yu(gt),gt=null))),uu(t,e),Pe(e),null;case 5:Sc(e);var s=Ln(Qs.current);if(n=e.type,t!==null&&e.stateNode!=null)Am(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return Pe(e),null}if(t=Ln(At.current),$i(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pt]=e,r[Js]=i,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(s=0;s<gs.length;s++)Q(gs[s],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":Nd(r,i),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Q("invalid",r);break;case"textarea":Ud(r,i),Q("invalid",r)}Ll(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&ji(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ji(r.textContent,o,t),s=["children",""+o]):Ds.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Q("scroll",r)}switch(n){case"input":bi(r),Ld(r,i,!0);break;case"textarea":bi(r),Dd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ip(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Pt]=e,t[Js]=r,Om(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ul(n,r),n){case"dialog":Q("cancel",t),Q("close",t),s=r;break;case"iframe":case"object":case"embed":Q("load",t),s=r;break;case"video":case"audio":for(s=0;s<gs.length;s++)Q(gs[s],t);s=r;break;case"source":Q("error",t),s=r;break;case"img":case"image":case"link":Q("error",t),Q("load",t),s=r;break;case"details":Q("toggle",t),s=r;break;case"input":Nd(t,r),s=Tl(t,r),Q("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ne({},r,{value:void 0}),Q("invalid",t);break;case"textarea":Ud(t,r),s=$l(t,r),Q("invalid",t);break;default:s=r}Ll(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?lp(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ap(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fs(t,l):typeof l=="number"&&Fs(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ds.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Q("scroll",t):l!=null&&Yu(t,i,l,a))}switch(n){case"input":bi(t),Ld(t,r,!1);break;case"textarea":bi(t),Dd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ar(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ar(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pe(e),null;case 6:if(t&&e.stateNode!=null)Tm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=Ln(Qs.current),Ln(At.current),$i(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pt]=e,(i=r.nodeValue!==n)&&(t=Qe,t!==null))switch(t.tag){case 3:ji(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ji(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pt]=e,e.stateNode=r}return Pe(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Ge!==null&&e.mode&1&&!(e.flags&128))Gp(),zr(),e.flags|=98560,i=!1;else if(i=$i(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));i[Pt]=e}else zr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),i=!1}else gt!==null&&(yu(gt),gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?me===0&&(me=3):$c())),e.updateQueue!==null&&(e.flags|=4),Pe(e),null);case 4:return Hr(),uu(t,e),t===null&&qs(e.stateNode.containerInfo),Pe(e),null;case 10:return yc(e.type._context),Pe(e),null;case 17:return Be(e.type)&&ba(),Pe(e),null;case 19:if(X(ee),i=e.memoizedState,i===null)return Pe(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)cs(i,!1);else{if(me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ia(t),a!==null){for(e.flags|=128,cs(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(ee,ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&ie()>qr&&(e.flags|=128,r=!0,cs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ia(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Y)return Pe(e),null}else 2*ie()-i.renderingStartTime>qr&&n!==1073741824&&(e.flags|=128,r=!0,cs(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ie(),e.sibling=null,n=ee.current,G(ee,r?n&1|2:n&1),e):(Pe(e),null);case 22:case 23:return jc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Je&1073741824&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function u_(t,e){switch(fc(e),e.tag){case 1:return Be(e.type)&&ba(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hr(),X(Me),X(Ae),Ec(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sc(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));zr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return Hr(),null;case 10:return yc(e.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var Ui=!1,Oe=!1,c_=typeof WeakSet=="function"?WeakSet:Set,A=null;function Pr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(t,e,r)}else n.current=null}function cu(t,e,n){try{n()}catch(r){se(t,e,r)}}var Ph=!1;function d_(t,e){if(Kl=Sa,t=Lp(),dc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(o=a+s),d!==i||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++u===s&&(o=a),h===i&&++c===r&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jl={focusedElem:t,selectionRange:n},Sa=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:ht(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(_){se(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return v=Ph,Ph=!1,v}function As(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cu(e,n,i)}s=s.next}while(s!==r)}}function so(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function du(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Im(t){var e=t.alternate;e!==null&&(t.alternate=null,Im(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pt],delete e[Js],delete e[Xl],delete e[Kw],delete e[Jw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jm(t){return t.tag===5||t.tag===3||t.tag===4}function Rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(t=t.child,t!==null))for(hu(t,e,n),t=t.sibling;t!==null;)hu(t,e,n),t=t.sibling}function fu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fu(t,e,n),t=t.sibling;t!==null;)fu(t,e,n),t=t.sibling}var Se=null,pt=!1;function Vt(t,e,n){for(n=n.child;n!==null;)$m(t,e,n),n=n.sibling}function $m(t,e,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Qa,n)}catch{}switch(n.tag){case 5:Oe||Pr(n,e);case 6:var r=Se,s=pt;Se=null,Vt(t,e,n),Se=r,pt=s,Se!==null&&(pt?(t=Se,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(pt?(t=Se,n=n.stateNode,t.nodeType===8?Go(t.parentNode,n):t.nodeType===1&&Go(t,n),Ws(t)):Go(Se,n.stateNode));break;case 4:r=Se,s=pt,Se=n.stateNode.containerInfo,pt=!0,Vt(t,e,n),Se=r,pt=s;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&cu(n,e,a),s=s.next}while(s!==r)}Vt(t,e,n);break;case 1:if(!Oe&&(Pr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){se(n,e,o)}Vt(t,e,n);break;case 21:Vt(t,e,n);break;case 22:n.mode&1?(Oe=(r=Oe)||n.memoizedState!==null,Vt(t,e,n),Oe=r):Vt(t,e,n);break;default:Vt(t,e,n)}}function Oh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c_),e.forEach(function(r){var s=__.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Se=o.stateNode,pt=!1;break e;case 3:Se=o.stateNode.containerInfo,pt=!0;break e;case 4:Se=o.stateNode.containerInfo,pt=!0;break e}o=o.return}if(Se===null)throw Error(C(160));$m(i,a,s),Se=null,pt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){se(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nm(e,t),e=e.sibling}function Nm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),St(t),r&4){try{As(3,t,t.return),so(3,t)}catch(y){se(t,t.return,y)}try{As(5,t,t.return)}catch(y){se(t,t.return,y)}}break;case 1:ut(e,t),St(t),r&512&&n!==null&&Pr(n,n.return);break;case 5:if(ut(e,t),St(t),r&512&&n!==null&&Pr(n,n.return),t.flags&32){var s=t.stateNode;try{Fs(s,"")}catch(y){se(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&rp(s,i),Ul(o,a);var u=Ul(o,i);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?lp(s,d):c==="dangerouslySetInnerHTML"?ap(s,d):c==="children"?Fs(s,d):Yu(s,c,d,u)}switch(o){case"input":Il(s,i);break;case"textarea":sp(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ar(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ar(s,!!i.multiple,i.defaultValue,!0):Ar(s,!!i.multiple,i.multiple?[]:"",!1))}s[Js]=i}catch(y){se(t,t.return,y)}}break;case 6:if(ut(e,t),St(t),r&4){if(t.stateNode===null)throw Error(C(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){se(t,t.return,y)}}break;case 3:if(ut(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ws(e.containerInfo)}catch(y){se(t,t.return,y)}break;case 4:ut(e,t),St(t);break;case 13:ut(e,t),St(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tc=ie())),r&4&&Oh(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Oe=(u=Oe)||c,ut(e,t),Oe=u):ut(e,t),St(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(A=t,c=t.child;c!==null;){for(d=A=c;A!==null;){switch(h=A,m=h.child,h.tag){case 0:case 11:case 14:case 15:As(4,h,h.return);break;case 1:Pr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){se(r,n,y)}}break;case 5:Pr(h,h.return);break;case 22:if(h.memoizedState!==null){Th(d);continue}}m!==null?(m.return=h,A=m):Th(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=op("display",a))}catch(y){se(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){se(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ut(e,t),St(t),r&4&&Oh(t);break;case 21:break;default:ut(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jm(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fs(s,""),r.flags&=-33);var i=Rh(t);fu(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Rh(t);hu(t,o,a);break;default:throw Error(C(161))}}catch(l){se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h_(t,e,n){A=t,Lm(t)}function Lm(t,e,n){for(var r=(t.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ui;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Oe;o=Ui;var u=Oe;if(Ui=a,(Oe=l)&&!u)for(A=s;A!==null;)a=A,l=a.child,a.tag===22&&a.memoizedState!==null?Ih(s):l!==null?(l.return=a,A=l):Ih(s);for(;i!==null;)A=i,Lm(i),i=i.sibling;A=s,Ui=o,Oe=u}Ah(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):Ah(t)}}function Ah(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||so(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ht(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ph(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ph(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ws(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Oe||e.flags&512&&du(e)}catch(h){se(e,e.return,h)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function Th(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function Ih(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{so(4,e)}catch(l){se(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){se(e,s,l)}}var i=e.return;try{du(e)}catch(l){se(e,i,l)}break;case 5:var a=e.return;try{du(e)}catch(l){se(e,a,l)}}}catch(l){se(e,e.return,l)}if(e===t){A=null;break}var o=e.sibling;if(o!==null){o.return=e.return,A=o;break}A=e.return}}var f_=Math.ceil,Na=Ht.ReactCurrentDispatcher,Oc=Ht.ReactCurrentOwner,st=Ht.ReactCurrentBatchConfig,V=0,_e=null,ue=null,ke=0,Je=0,Rr=_n(0),me=0,ei=null,Hn=0,io=0,Ac=0,Ts=null,Ue=null,Tc=0,qr=1/0,$t=null,La=!1,pu=null,hn=null,Di=!1,sn=null,Ua=0,Is=0,mu=null,oa=-1,la=0;function Ie(){return V&6?ie():oa!==-1?oa:oa=ie()}function fn(t){return t.mode&1?V&2&&ke!==0?ke&-ke:Qw.transition!==null?(la===0&&(la=_p()),la):(t=q,t!==0||(t=window.event,t=t===void 0?16:Pp(t.type)),t):1}function wt(t,e,n,r){if(50<Is)throw Is=0,mu=null,Error(C(185));li(t,n,r),(!(V&2)||t!==_e)&&(t===_e&&(!(V&2)&&(io|=n),me===4&&en(t,ke)),ze(t,r),n===1&&V===0&&!(e.mode&1)&&(qr=ie()+500,to&&Sn()))}function ze(t,e){var n=t.callbackNode;Qv(t,e);var r=_a(t,t===_e?ke:0);if(r===0)n!==null&&Bd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bd(n),e===1)t.tag===0?Gw(jh.bind(null,t)):qp(jh.bind(null,t)),Vw(function(){!(V&6)&&Sn()}),n=null;else{switch(Sp(r)){case 1:n=rc;break;case 4:n=vp;break;case 16:n=wa;break;case 536870912:n=wp;break;default:n=wa}n=Hm(n,Um.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Um(t,e){if(oa=-1,la=0,V&6)throw Error(C(327));var n=t.callbackNode;if(Nr()&&t.callbackNode!==n)return null;var r=_a(t,t===_e?ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Da(t,r);else{e=r;var s=V;V|=2;var i=Fm();(_e!==t||ke!==e)&&($t=null,qr=ie()+500,Fn(t,e));do try{g_();break}catch(o){Dm(t,o)}while(!0);gc(),Na.current=i,V=s,ue!==null?e=0:(_e=null,ke=0,e=me)}if(e!==0){if(e===2&&(s=zl(t),s!==0&&(r=s,e=gu(t,s))),e===1)throw n=ei,Fn(t,0),en(t,r),ze(t,ie()),n;if(e===6)en(t,r);else{if(s=t.current.alternate,!(r&30)&&!p_(s)&&(e=Da(t,r),e===2&&(i=zl(t),i!==0&&(r=i,e=gu(t,i))),e===1))throw n=ei,Fn(t,0),en(t,r),ze(t,ie()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:On(t,Ue,$t);break;case 3:if(en(t,r),(r&130023424)===r&&(e=Tc+500-ie(),10<e)){if(_a(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ql(On.bind(null,t,Ue,$t),e);break}On(t,Ue,$t);break;case 4:if(en(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-vt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f_(r/1960))-r,10<r){t.timeoutHandle=Ql(On.bind(null,t,Ue,$t),r);break}On(t,Ue,$t);break;case 5:On(t,Ue,$t);break;default:throw Error(C(329))}}}return ze(t,ie()),t.callbackNode===n?Um.bind(null,t):null}function gu(t,e){var n=Ts;return t.current.memoizedState.isDehydrated&&(Fn(t,e).flags|=256),t=Da(t,e),t!==2&&(e=Ue,Ue=n,e!==null&&yu(e)),t}function yu(t){Ue===null?Ue=t:Ue.push.apply(Ue,t)}function p_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_t(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~Ac,e&=~io,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function jh(t){if(V&6)throw Error(C(327));Nr();var e=_a(t,0);if(!(e&1))return ze(t,ie()),null;var n=Da(t,e);if(t.tag!==0&&n===2){var r=zl(t);r!==0&&(e=r,n=gu(t,r))}if(n===1)throw n=ei,Fn(t,0),en(t,e),ze(t,ie()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,On(t,Ue,$t),ze(t,ie()),null}function Ic(t,e){var n=V;V|=1;try{return t(e)}finally{V=n,V===0&&(qr=ie()+500,to&&Sn())}}function Vn(t){sn!==null&&sn.tag===0&&!(V&6)&&Nr();var e=V;V|=1;var n=st.transition,r=q;try{if(st.transition=null,q=1,t)return t()}finally{q=r,st.transition=n,V=e,!(V&6)&&Sn()}}function jc(){Je=Rr.current,X(Rr)}function Fn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hw(n)),ue!==null)for(n=ue.return;n!==null;){var r=n;switch(fc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ba();break;case 3:Hr(),X(Me),X(Ae),Ec();break;case 5:Sc(r);break;case 4:Hr();break;case 13:X(ee);break;case 19:X(ee);break;case 10:yc(r.type._context);break;case 22:case 23:jc()}n=n.return}if(_e=t,ue=t=pn(t.current,null),ke=Je=e,me=0,ei=null,Ac=io=Hn=0,Ue=Ts=null,Nn!==null){for(e=0;e<Nn.length;e++)if(n=Nn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Nn=null}return t}function Dm(t,e){do{var n=ue;try{if(gc(),sa.current=$a,ja){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ja=!1}if(Wn=0,we=pe=te=null,Os=!1,Xs=0,Oc.current=null,n===null||n.return===null){me=1,ei=e,ue=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=ke,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=_h(a);if(m!==null){m.flags&=-257,Sh(m,a,o,i,e),m.mode&1&&wh(i,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){wh(i,u,e),$c();break e}l=Error(C(426))}}else if(Y&&o.mode&1){var w=_h(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Sh(w,a,o,i,e),pc(Vr(l,o));break e}}i=l=Vr(l,o),me!==4&&(me=2),Ts===null?Ts=[i]:Ts.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Sm(i,l,e);fh(i,g);break e;case 1:o=l;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(hn===null||!hn.has(p)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Em(i,o,e);fh(i,_);break e}}i=i.return}while(i!==null)}Bm(n)}catch(x){e=x,ue===n&&n!==null&&(ue=n=n.return);continue}break}while(!0)}function Fm(){var t=Na.current;return Na.current=$a,t===null?$a:t}function $c(){(me===0||me===3||me===2)&&(me=4),_e===null||!(Hn&268435455)&&!(io&268435455)||en(_e,ke)}function Da(t,e){var n=V;V|=2;var r=Fm();(_e!==t||ke!==e)&&($t=null,Fn(t,e));do try{m_();break}catch(s){Dm(t,s)}while(!0);if(gc(),V=n,Na.current=r,ue!==null)throw Error(C(261));return _e=null,ke=0,me}function m_(){for(;ue!==null;)Mm(ue)}function g_(){for(;ue!==null&&!Bv();)Mm(ue)}function Mm(t){var e=Wm(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?Bm(t):ue=e,Oc.current=null}function Bm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=u_(n,e),n!==null){n.flags&=32767,ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{me=6,ue=null;return}}else if(n=l_(n,e,Je),n!==null){ue=n;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);me===0&&(me=5)}function On(t,e,n){var r=q,s=st.transition;try{st.transition=null,q=1,y_(t,e,n,r)}finally{st.transition=s,q=r}return null}function y_(t,e,n,r){do Nr();while(sn!==null);if(V&6)throw Error(C(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Xv(t,i),t===_e&&(ue=_e=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Di||(Di=!0,Hm(wa,function(){return Nr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=st.transition,st.transition=null;var a=q;q=1;var o=V;V|=4,Oc.current=null,d_(t,n),Nm(n,t),Uw(Jl),Sa=!!Kl,Jl=Kl=null,t.current=n,h_(n),zv(),V=o,q=a,st.transition=i}else t.current=n;if(Di&&(Di=!1,sn=t,Ua=s),i=t.pendingLanes,i===0&&(hn=null),Vv(n.stateNode),ze(t,ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(La)throw La=!1,t=pu,pu=null,t;return Ua&1&&t.tag!==0&&Nr(),i=t.pendingLanes,i&1?t===mu?Is++:(Is=0,mu=t):Is=0,Sn(),null}function Nr(){if(sn!==null){var t=Sp(Ua),e=st.transition,n=q;try{if(st.transition=null,q=16>t?16:t,sn===null)var r=!1;else{if(t=sn,sn=null,Ua=0,V&6)throw Error(C(331));var s=V;for(V|=4,A=t.current;A!==null;){var i=A,a=i.child;if(A.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(A=u;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:As(8,c,i)}var d=c.child;if(d!==null)d.return=c,A=d;else for(;A!==null;){c=A;var h=c.sibling,m=c.return;if(Im(c),c===u){A=null;break}if(h!==null){h.return=m,A=h;break}A=m}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}A=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,A=a;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:As(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,A=g;break e}A=i.return}}var f=t.current;for(A=f;A!==null;){a=A;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,A=p;else e:for(a=f;A!==null;){if(o=A,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(x){se(o,o.return,x)}if(o===a){A=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,A=_;break e}A=o.return}}if(V=s,Sn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Qa,t)}catch{}r=!0}return r}finally{q=n,st.transition=e}}return!1}function $h(t,e,n){e=Vr(n,e),e=Sm(t,e,1),t=dn(t,e,1),e=Ie(),t!==null&&(li(t,1,e),ze(t,e))}function se(t,e,n){if(t.tag===3)$h(t,t,n);else for(;e!==null;){if(e.tag===3){$h(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){t=Vr(n,t),t=Em(e,t,1),e=dn(e,t,1),t=Ie(),e!==null&&(li(e,1,t),ze(e,t));break}}e=e.return}}function v_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,_e===t&&(ke&n)===n&&(me===4||me===3&&(ke&130023424)===ke&&500>ie()-Tc?Fn(t,0):Ac|=n),ze(t,e)}function zm(t,e){e===0&&(t.mode&1?(e=Ri,Ri<<=1,!(Ri&130023424)&&(Ri=4194304)):e=1);var n=Ie();t=zt(t,e),t!==null&&(li(t,e,n),ze(t,n))}function w_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zm(t,n)}function __(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),zm(t,n)}var Wm;Wm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Me.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,o_(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,Y&&e.flags&1048576&&Kp(e,Ra,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;aa(t,e),t=e.pendingProps;var s=Br(e,Ae.current);$r(e,n),s=xc(null,e,r,t,s,n);var i=bc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Be(r)?(i=!0,Ca(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wc(e),s.updater=ro,e.stateNode=s,s._reactInternals=e,ru(e,r,t,n),e=au(null,e,r,!0,i,n)):(e.tag=0,Y&&i&&hc(e),Te(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(aa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E_(r),t=ht(r,t),s){case 0:e=iu(null,e,r,t,n);break e;case 1:e=xh(null,e,r,t,n);break e;case 11:e=Eh(null,e,r,t,n);break e;case 14:e=kh(null,e,r,ht(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),iu(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),xh(t,e,r,s,n);case 3:e:{if(Cm(e),t===null)throw Error(C(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Zp(t,e),Ta(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vr(Error(C(423)),e),e=bh(t,e,r,n,s);break e}else if(r!==s){s=Vr(Error(C(424)),e),e=bh(t,e,r,n,s);break e}else for(Ge=cn(e.stateNode.containerInfo.firstChild),Qe=e,Y=!0,gt=null,n=Xp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zr(),r===s){e=Wt(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return em(e),t===null&&eu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Gl(r,s)?a=null:i!==null&&Gl(r,i)&&(e.flags|=32),bm(t,e),Te(t,e,a,n),e.child;case 6:return t===null&&eu(e),null;case 13:return Pm(t,e,n);case 4:return _c(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wr(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),Eh(t,e,r,s,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,G(Oa,r._currentValue),r._currentValue=a,i!==null)if(_t(i.value,a)){if(i.children===s.children&&!Me.current){e=Wt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ft(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tu(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(C(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),tu(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Te(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$r(e,n),s=at(s),r=r(s),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,s=ht(r,e.pendingProps),s=ht(r.type,s),kh(t,e,r,s,n);case 15:return km(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),aa(t,e),e.tag=1,Be(r)?(t=!0,Ca(e)):t=!1,$r(e,n),_m(e,r,s),ru(e,r,s,n),au(null,e,r,!0,t,n);case 19:return Rm(t,e,n);case 22:return xm(t,e,n)}throw Error(C(156,e.tag))};function Hm(t,e){return yp(t,e)}function S_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new S_(t,e,n,r)}function Nc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E_(t){if(typeof t=="function")return Nc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ec)return 11;if(t===tc)return 14}return 2}function pn(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ua(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Nc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vr:return Mn(n.children,s,i,e);case Zu:a=8,s|=8;break;case Pl:return t=nt(12,n,e,s|2),t.elementType=Pl,t.lanes=i,t;case Rl:return t=nt(13,n,e,s),t.elementType=Rl,t.lanes=i,t;case Ol:return t=nt(19,n,e,s),t.elementType=Ol,t.lanes=i,t;case ep:return ao(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yf:a=10;break e;case Zf:a=9;break e;case ec:a=11;break e;case tc:a=14;break e;case Xt:a=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=nt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mn(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function ao(t,e,n,r){return t=nt(22,t,r,e),t.elementType=ep,t.lanes=n,t.stateNode={isHidden:!1},t}function rl(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function sl(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function k_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lc(t,e,n,r,s,i,a,o,l){return t=new k_(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wc(i),t}function x_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vm(t){if(!t)return vn;t=t._reactInternals;e:{if(Jn(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Be(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(Be(n))return Vp(t,n,e)}return e}function qm(t,e,n,r,s,i,a,o,l){return t=Lc(n,r,!0,t,s,i,a,o,l),t.context=Vm(null),n=t.current,r=Ie(),s=fn(n),i=Ft(r,s),i.callback=e??null,dn(n,i,s),t.current.lanes=s,li(t,s,r),ze(t,r),t}function oo(t,e,n,r){var s=e.current,i=Ie(),a=fn(s);return n=Vm(n),e.context===null?e.context=n:e.pendingContext=n,e=Ft(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dn(s,e,a),t!==null&&(wt(t,s,a,i),ra(t,s,a)),a}function Fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uc(t,e){Nh(t,e),(t=t.alternate)&&Nh(t,e)}function b_(){return null}var Km=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dc(t){this._internalRoot=t}lo.prototype.render=Dc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));oo(t,e,null,null)};lo.prototype.unmount=Dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){oo(null,t,null,null)}),e[Bt]=null}};function lo(t){this._internalRoot=t}lo.prototype.unstable_scheduleHydration=function(t){if(t){var e=xp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&Cp(t)}};function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lh(){}function C_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fa(a);i.call(u)}}var a=qm(e,r,t,0,null,!1,!1,"",Lh);return t._reactRootContainer=a,t[Bt]=a.current,qs(t.nodeType===8?t.parentNode:t),Vn(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Fa(l);o.call(u)}}var l=Lc(t,0,!1,null,null,!1,!1,"",Lh);return t._reactRootContainer=l,t[Bt]=l.current,qs(t.nodeType===8?t.parentNode:t),Vn(function(){oo(e,l,n,r)}),l}function co(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Fa(a);o.call(l)}}oo(e,a,t,s)}else a=C_(n,e,t,s,r);return Fa(a)}Ep=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ms(e.pendingLanes);n!==0&&(sc(e,n|1),ze(e,ie()),!(V&6)&&(qr=ie()+500,Sn()))}break;case 13:Vn(function(){var r=zt(t,1);if(r!==null){var s=Ie();wt(r,t,1,s)}}),Uc(t,1)}};ic=function(t){if(t.tag===13){var e=zt(t,134217728);if(e!==null){var n=Ie();wt(e,t,134217728,n)}Uc(t,134217728)}};kp=function(t){if(t.tag===13){var e=fn(t),n=zt(t,e);if(n!==null){var r=Ie();wt(n,t,e,r)}Uc(t,e)}};xp=function(){return q};bp=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};Fl=function(t,e,n){switch(e){case"input":if(Il(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=eo(r);if(!s)throw Error(C(90));np(r),Il(r,s)}}}break;case"textarea":sp(t,n);break;case"select":e=n.value,e!=null&&Ar(t,!!n.multiple,e,!1)}};dp=Ic;hp=Vn;var P_={usingClientEntryPoint:!1,Events:[ci,Er,eo,up,cp,Ic]},ds={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R_={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mp(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||b_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Qa=Fi.inject(R_),Ot=Fi}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P_;Ye.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(e))throw Error(C(200));return x_(t,e,null,n)};Ye.createRoot=function(t,e){if(!Fc(t))throw Error(C(299));var n=!1,r="",s=Km;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lc(t,1,!1,null,null,n,!1,r,s),t[Bt]=e.current,qs(t.nodeType===8?t.parentNode:t),new Dc(e)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=mp(e),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return Vn(t)};Ye.hydrate=function(t,e,n){if(!uo(e))throw Error(C(200));return co(null,t,e,!0,n)};Ye.hydrateRoot=function(t,e,n){if(!Fc(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Km;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=qm(e,null,t,1,n??null,s,!1,i,a),t[Bt]=e.current,qs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lo(e)};Ye.render=function(t,e,n){if(!uo(e))throw Error(C(200));return co(null,t,e,!1,n)};Ye.unmountComponentAtNode=function(t){if(!uo(t))throw Error(C(40));return t._reactRootContainer?(Vn(function(){co(null,null,t,!1,function(){t._reactRootContainer=null,t[Bt]=null})}),!0):!1};Ye.unstable_batchedUpdates=Ic;Ye.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uo(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return co(t,e,n,!1,r)};Ye.version="18.3.1-next-f1338f8080-20240426";function Jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jm)}catch(t){console.error(t)}}Jm(),Jf.exports=Ye;var O_=Jf.exports,Uh=O_;bl.createRoot=Uh.createRoot,bl.hydrateRoot=Uh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ti(){return ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ti.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const Dh="popstate";function A_(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return vu("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ma(s)}return I_(e,n,null,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T_(){return Math.random().toString(36).substr(2,8)}function Fh(t,e){return{usr:t.state,key:t.key,idx:e}}function vu(t,e,n,r){return n===void 0&&(n=null),ti({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xr(e):e,{state:n,key:e&&e.key||r||T_()})}function Ma(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function I_(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=an.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(ti({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){o=an.Pop;let w=c(),g=w==null?null:w-u;u=w,l&&l({action:o,location:y.location,delta:g})}function h(w,g){o=an.Push;let f=vu(y.location,w,g);u=c()+1;let p=Fh(f,u),_=y.createHref(f);try{a.pushState(p,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(_)}i&&l&&l({action:o,location:y.location,delta:1})}function m(w,g){o=an.Replace;let f=vu(y.location,w,g);u=c();let p=Fh(f,u),_=y.createHref(f);a.replaceState(p,"",_),i&&l&&l({action:o,location:y.location,delta:0})}function v(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof w=="string"?w:Ma(w);return f=f.replace(/ $/,"%20"),ce(g,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,g)}let y={get action(){return o},get location(){return t(s,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Dh,d),l=w,()=>{s.removeEventListener(Dh,d),l=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:m,go(w){return a.go(w)}};return y}var Mh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mh||(Mh={}));function j_(t,e,n){return n===void 0&&(n="/"),$_(t,e,n)}function $_(t,e,n,r){let s=typeof e=="string"?Xr(e):e,i=Mc(s.pathname||"/",n);if(i==null)return null;let a=Qm(t);N_(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=K_(i);o=H_(a[l],u)}return o}function Qm(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(ce(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=mn([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Qm(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:z_(u,i.index),routesMeta:c})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of Xm(i.path))s(i,a,l)}),e}function Xm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Xm(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function N_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W_(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L_=/^:[\w-]+$/,U_=3,D_=2,F_=1,M_=10,B_=-2,Bh=t=>t==="*";function z_(t,e){let n=t.split("/"),r=n.length;return n.some(Bh)&&(r+=B_),e&&(r+=D_),n.filter(s=>!Bh(s)).reduce((s,i)=>s+(L_.test(i)?U_:i===""?F_:M_),r)}function W_(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function H_(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=V_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:mn([i,d.pathname]),pathnameBase:X_(mn([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=mn([i,d.pathnameBase]))}return a}function V_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=q_(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let y=o[d]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[d];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function q_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function K_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function J_(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xr(t):t;return{pathname:n?n.startsWith("/")?n:G_(n,e):e,search:Y_(r),hash:Z_(s)}}function G_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function il(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Q_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ym(t,e){let n=Q_(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xr(t):(s=ti({},t),ce(!s.pathname||!s.pathname.includes("?"),il("?","pathname","search",s)),ce(!s.pathname||!s.pathname.includes("#"),il("#","pathname","hash",s)),ce(!s.search||!s.search.includes("#"),il("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=J_(s,o),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const mn=t=>t.join("/").replace(/\/\/+/g,"/"),X_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eg=["post","put","patch","delete"];new Set(eg);const t0=["get",...eg];new Set(t0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ni(){return ni=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ni.apply(this,arguments)}const Bc=b.createContext(null),n0=b.createContext(null),Gn=b.createContext(null),ho=b.createContext(null),Qn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),tg=b.createContext(null);function r0(t,e){let{relative:n}=e===void 0?{}:e;hi()||ce(!1);let{basename:r,navigator:s}=b.useContext(Gn),{hash:i,pathname:a,search:o}=rg(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:mn([r,a])),s.createHref({pathname:l,search:o,hash:i})}function hi(){return b.useContext(ho)!=null}function fo(){return hi()||ce(!1),b.useContext(ho).location}function ng(t){b.useContext(Gn).static||b.useLayoutEffect(t)}function s0(){let{isDataRoute:t}=b.useContext(Qn);return t?y0():i0()}function i0(){hi()||ce(!1);let t=b.useContext(Bc),{basename:e,future:n,navigator:r}=b.useContext(Gn),{matches:s}=b.useContext(Qn),{pathname:i}=fo(),a=JSON.stringify(Ym(s,n.v7_relativeSplatPath)),o=b.useRef(!1);return ng(()=>{o.current=!0}),b.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=Zm(u,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:mn([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,a,i,t])}function rg(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Gn),{matches:s}=b.useContext(Qn),{pathname:i}=fo(),a=JSON.stringify(Ym(s,r.v7_relativeSplatPath));return b.useMemo(()=>Zm(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function a0(t,e){return o0(t,e)}function o0(t,e,n,r){hi()||ce(!1);let{navigator:s}=b.useContext(Gn),{matches:i}=b.useContext(Qn),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=fo(),c;if(e){var d;let w=typeof e=="string"?Xr(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||ce(!1),c=w}else c=u;let h=c.pathname||"/",m=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=j_(t,{pathname:m}),y=h0(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:mn([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:mn([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&y?b.createElement(ho.Provider,{value:{location:ni({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:an.Pop}},y):y}function l0(){let t=g0(),e=e0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const u0=b.createElement(l0,null);class c0 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Qn.Provider,{value:this.props.routeContext},b.createElement(tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d0(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(Bc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Qn.Provider,{value:e},r)}function h0(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let c=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);c>=0||ce(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,h)=>{let m,v=!1,y=null,w=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||u0,l&&(u<0&&h===0?(v0("route-fallback"),v=!0,w=null):u===h&&(v=!0,w=d.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,h+1)),f=()=>{let p;return m?p=y:v?p=w:d.route.Component?p=b.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=c,b.createElement(d0,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:p})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(c0,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):f()},null)}var sg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sg||{}),ig=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ig||{});function f0(t){let e=b.useContext(Bc);return e||ce(!1),e}function p0(t){let e=b.useContext(n0);return e||ce(!1),e}function m0(t){let e=b.useContext(Qn);return e||ce(!1),e}function ag(t){let e=m0(),n=e.matches[e.matches.length-1];return n.route.id||ce(!1),n.route.id}function g0(){var t;let e=b.useContext(tg),n=p0(),r=ag();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function y0(){let{router:t}=f0(sg.UseNavigateStable),e=ag(ig.UseNavigateStable),n=b.useRef(!1);return ng(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ni({fromRouteId:e},i)))},[t,e])}const zh={};function v0(t,e,n){zh[t]||(zh[t]=!0)}function w0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wu(t){ce(!1)}function _0(t){let{basename:e="/",children:n=null,location:r,navigationType:s=an.Pop,navigator:i,static:a=!1,future:o}=t;hi()&&ce(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:a,future:ni({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Xr(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:v="default"}=r,y=b.useMemo(()=>{let w=Mc(c,l);return w==null?null:{location:{pathname:w,search:d,hash:h,state:m,key:v},navigationType:s}},[l,c,d,h,m,v,s]);return y==null?null:b.createElement(Gn.Provider,{value:u},b.createElement(ho.Provider,{children:n,value:y}))}function S0(t){let{children:e,location:n}=t;return a0(_u(e),n)}new Promise(()=>{});function _u(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,_u(r.props.children,i));return}r.type!==wu&&ce(!1),!r.props.index||!r.props.children||ce(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=_u(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Su.apply(this,arguments)}function E0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function k0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x0(t,e){return t.button===0&&(!e||e==="_self")&&!k0(t)}const b0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C0="6";try{window.__reactRouterVersion=C0}catch{}const P0="startTransition",Wh=vv[P0];function R0(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=A_({window:s,v5Compat:!0}));let a=i.current,[o,l]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=b.useCallback(d=>{u&&Wh?Wh(()=>l(d)):l(d)},[l,u]);return b.useLayoutEffect(()=>a.listen(c),[a,c]),b.useEffect(()=>w0(r),[r]),b.createElement(_0,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const O0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,al=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=E0(e,b0),{basename:m}=b.useContext(Gn),v,y=!1;if(typeof u=="string"&&A0.test(u)&&(v=u,O0))try{let p=new URL(window.location.href),_=u.startsWith("//")?new URL(p.protocol+u):new URL(u),x=Mc(_.pathname,m);_.origin===p.origin&&x!=null?u=x+_.search+_.hash:y=!0}catch{}let w=r0(u,{relative:s}),g=T0(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:s,viewTransition:d});function f(p){r&&r(p),p.defaultPrevented||g(p)}return b.createElement("a",Su({},h,{href:v||w,onClick:y||i?r:f,ref:n,target:l}))});var Hh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hh||(Hh={}));var Vh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vh||(Vh={}));function T0(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=s0(),u=fo(),c=rg(t,{relative:a});return b.useCallback(d=>{if(x0(d,n)){d.preventDefault();let h=r!==void 0?r:Ma(u)===Ma(c);l(t,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,c,r,s,n,t,i,a,o])}const I0="modulepreload",j0=function(t){return"/"+t},qh={},fi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=j0(l),l in qh)return;qh[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":I0,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},$0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Yr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class zc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Kh extends zc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jh extends zc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gh extends zc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Eu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Eu||(Eu={}));var N0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class L0{constructor(e,{headers:n={},customFetch:r,region:s=Eu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return N0(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:o,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(u["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(u["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Kh(g)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new Jh(m);if(!m.ok)throw new Gh(m);let y=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield m.json():y==="application/octet-stream"?w=yield m.blob():y==="text/event-stream"?w=m:y==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Kh(i)}:{data:null,error:i,response:i instanceof Gh||i instanceof Jh?i.context:void 0}}})}}var De={},Wc={},po={},pi={},mo={},go={},U0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kr=U0();const D0=Kr.fetch,og=Kr.fetch.bind(Kr),lg=Kr.Headers,F0=Kr.Request,M0=Kr.Response,Yr=Object.freeze(Object.defineProperty({__proto__:null,Headers:lg,Request:F0,Response:M0,default:og,fetch:D0},Symbol.toStringTag,{value:"Module"})),B0=nv(Yr);var yo={};Object.defineProperty(yo,"__esModule",{value:!0});let z0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};yo.default=z0;var ug=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(go,"__esModule",{value:!0});const W0=ug(B0),H0=ug(yo);let V0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=W0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,u;let c=null,d=null,h=null,m=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?d=f:d=JSON.parse(f))}const w=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await i.text();try{c=JSON.parse(w),Array.isArray(c)&&i.status===404&&(d=[],c=null,m=200,v="OK")}catch{i.status===404&&w===""?(m=204,v="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,v="OK"),c&&this.shouldThrowOnError)throw new H0.default(c)}return{error:c,data:d,count:h,status:m,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};go.default=V0;var q0=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mo,"__esModule",{value:!0});const K0=q0(go);let J0=class extends K0.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};mo.default=J0;var G0=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pi,"__esModule",{value:!0});const Q0=G0(mo);let X0=class extends Q0.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};pi.default=X0;var Y0=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});const hs=Y0(pi);let Z0=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new hs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new hs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new hs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new hs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};po.default=Z0;var cg=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wc,"__esModule",{value:!0});const eS=cg(po),tS=cg(pi);let nS=class dg{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new eS.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new dg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new tS.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Wc.default=nS;var Zr=it&&it.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(De,"__esModule",{value:!0});De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const hg=Zr(Wc);De.PostgrestClient=hg.default;const fg=Zr(po);De.PostgrestQueryBuilder=fg.default;const pg=Zr(pi);De.PostgrestFilterBuilder=pg.default;const mg=Zr(mo);De.PostgrestTransformBuilder=mg.default;const gg=Zr(go);De.PostgrestBuilder=gg.default;const yg=Zr(yo);De.PostgrestError=yg.default;var rS=De.default={PostgrestClient:hg.default,PostgrestQueryBuilder:fg.default,PostgrestFilterBuilder:pg.default,PostgrestTransformBuilder:mg.default,PostgrestBuilder:gg.default,PostgrestError:yg.default};const{PostgrestClient:sS,PostgrestQueryBuilder:$x,PostgrestFilterBuilder:Nx,PostgrestTransformBuilder:Lx,PostgrestBuilder:Ux,PostgrestError:Dx}=rS;class iS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const aS="2.75.0",oS=`realtime-js/${aS}`,lS="1.0.0",ku=1e4,uS=1e3,cS=100;var js;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(js||(js={}));var he;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(he||(he={}));var mt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(mt||(mt={}));var xu;(function(t){t.websocket="websocket"})(xu||(xu={}));var Tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Tn||(Tn={}));class dS{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class vg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(J||(J={}));const Qh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=hS(a,t,e,s),i),{}):{}},hS=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?wg(i,a):bu(a)},wg=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return gS(e,n)}switch(t){case J.bool:return fS(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return pS(e);case J.json:case J.jsonb:return mS(e);case J.timestamp:return yS(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return bu(e);default:return bu(e)}},bu=t=>t,fS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},pS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},mS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>wg(e,o))}return t},yS=t=>typeof t=="string"?t.replace(" ","T"):t,_g=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ol{constructor(e,n,r={},s=ku){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Xh||(Xh={}));class $s{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$s.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=$s.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=$s.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=i[u];if(d){const h=c.map(w=>w.presence_ref),m=d.map(w=>w.presence_ref),v=c.filter(w=>m.indexOf(w.presence_ref)<0),y=d.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(o[u]=v),y.length>0&&(l[u]=y)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(m=>m.presence_ref),h=c.filter(m=>d.indexOf(m.presence_ref)<0);e[o].unshift(...h)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Yh||(Yh={}));var Ns;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ns||(Ns={}));var Nt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nt||(Nt={}));class Hc{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ol(this,mt.join,this.params,this.timeout),this.rejoinTimer=new vg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mt.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new $s(this),this.broadcastEndpointURL=_g(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Ns.PRESENCE]&&this.bindings[Ns.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Nt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Nt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e==null||e(Nt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,g=[];for(let f=0;f<w;f++){const p=y[f],{filter:{event:_,schema:x,table:k,filter:E}}=p,R=m&&m[f];if(R&&R.event===_&&R.schema===x&&R.table===k&&R.filter===E)g.push(Object.assign(Object.assign({},p),{id:R.id}));else{this.unsubscribe(),this.state=he.errored,e==null||e(Nt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Nt.SUBSCRIBED);return}}).receive("error",m=>{this.state=he.errored,e==null||e(Nt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Nt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===he.joined&&e===Ns.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=he.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ol(this,mt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ol(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>cS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=mt;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,y,w;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(h,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var v,y,w,g,f,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const _=m.id,x=(v=m.filter)===null||v===void 0?void 0:v.event;return _&&((y=n.ids)===null||y===void 0?void 0:y.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(f=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:y,table:w,commit_timestamp:g,type:f,errors:p}=v;h=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(v))}m.callback(h,r)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Hc.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mt.close,{},e)}_onError(e){this._on(mt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Qh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Qh(e.columns,e.old_record)),n}}const ll=()=>{},Mi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vS=[1e3,2e3,5e3,1e4],wS=1e4,_S=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SS{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ku,this.transport=null,this.heartbeatIntervalMs=Mi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ll,this.ref=0,this.reconnectTimer=null,this.logger=ll,this.conn=null,this.sendBuffer=[],this.serializer=new dS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>fi(async()=>{const{default:o}=await Promise.resolve().then(()=>Yr);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=_g(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lS}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case js.connecting:return Tn.Connecting;case js.open:return Tn.Open;case js.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Hc(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(uS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Mi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(mt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_S],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:oS};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(mt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,l,u,c;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ku,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Mi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:ll,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>vS[d-1]||wS,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ES extends Vc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cu extends Vc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var kS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Sg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Yr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xS=()=>kS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fi(()=>Promise.resolve().then(()=>Yr),void 0)).Response:Response}),Pu=t=>{if(Array.isArray(t))return t.map(n=>Pu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Pu(r)}),e},bS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Xn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const ul=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CS=(t,e,n)=>Xn(void 0,void 0,void 0,function*(){const r=yield xS();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new ES(ul(s),i,a))}).catch(s=>{e(new Cu(ul(s),s))}):e(new Cu(ul(t),t))}),PS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(bS(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function mi(t,e,n,r,s,i){return Xn(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,PS(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>CS(l,o,r))})})}function Ba(t,e,n,r){return Xn(this,void 0,void 0,function*(){return mi(t,"GET",e,n,r)})}function xt(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return mi(t,"POST",e,r,s,n)})}function Ru(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return mi(t,"PUT",e,r,s,n)})}function RS(t,e,n,r){return Xn(this,void 0,void 0,function*(){return mi(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Eg(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return mi(t,"DELETE",e,r,s,n)})}var OS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class AS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return OS(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}}var TS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class IS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new AS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return TS(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}}var Ne=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const jS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $S{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Sg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Ne(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Zh),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield(e=="PUT"?Ru:xt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Zh.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield Ru(this.fetch,o.toString(),l,{headers:c});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(le(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield xt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Vc("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ne(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield xt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ne(this,void 0,void 0,function*(){try{const s=yield xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),l=()=>Ba(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new IS(l,this.shouldThrowOnError)}info(e){return Ne(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ba(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Pu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}exists(e){return Ne(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield RS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r)&&r instanceof Cu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield Eg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jS),n),{prefix:e||""});return{data:yield xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}listV2(e,n){return Ne(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield xt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const NS="2.75.0",LS={"X-Client-Info":`storage-js/${NS}`};var rr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class US{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LS),n),this.fetch=Sg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return rr(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}getBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}createBucket(e){return rr(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return rr(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}emptyBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield Eg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}}class DS extends US{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new $S(this.url,this.headers,e,this.fetch)}}const FS="2.75.0";let ys="";typeof Deno<"u"?ys="deno":typeof document<"u"?ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ys="react-native":ys="node";const MS={"X-Client-Info":`supabase-js-${ys}/${FS}`},BS={headers:MS},zS={schema:"public"},WS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HS={};var VS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const qS=t=>{let e;return t?e=t:typeof fetch>"u"?e=og:e=fetch,(...n)=>e(...n)},KS=()=>typeof Headers>"u"?lg:Headers,JS=(t,e,n)=>{const r=qS(n),s=KS();return(i,a)=>VS(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var GS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function QS(t){return t.endsWith("/")?t:t+"/"}function XS(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>GS(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function YS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(QS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const kg="2.75.0",fr=30*1e3,Ou=3,cl=Ou*fr,ZS="http://localhost:9999",eE="supabase.auth.token",tE={"X-Client-Info":`gotrue-js/${kg}`},Au="X-Supabase-Api-Version",xg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rE=10*60*1e3;class ri extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function N(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sE extends ri{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iE(t){return N(t)&&t.name==="AuthApiError"}class In extends ri{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class En extends ri{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Qt extends En{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function aE(t){return N(t)&&t.name==="AuthSessionMissingError"}class sr extends En{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bi extends En{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zi extends En{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oE(t){return N(t)&&t.name==="AuthImplicitGrantRedirectError"}class ef extends En{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tu extends En{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function dl(t){return N(t)&&t.name==="AuthRetryableFetchError"}class tf extends En{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Iu extends En{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const za="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nf=` 	
\r=`.split(""),lE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nf.length;e+=1)t[nf[e].charCodeAt(0)]=-2;for(let e=0;e<za.length;e+=1)t[za[e].charCodeAt(0)]=e;return t})();function rf(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(za[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(za[r]),e.queuedBits-=6}}function bg(t,e,n){const r=lE[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sf(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{dE(a,r,n)};for(let a=0;a<t.length;a+=1)bg(t.charCodeAt(a),s,i);return e.join("")}function uE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cE(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}uE(r,e)}}function dE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Lr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)bg(t.charCodeAt(s),n,r);return new Uint8Array(e)}function hE(t){const e=[];return cE(t,n=>e.push(n)),new Uint8Array(e)}function Un(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>rf(s,n,r)),rf(null,n,r),e.join("")}function fE(t){return Math.round(Date.now()/1e3)+t}function pE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const qe=()=>typeof window<"u"&&typeof document<"u",bn={tested:!1,writable:!1},Cg=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bn.tested)return bn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bn.tested=!0,bn.writable=!0}catch{bn.tested=!0,bn.writable=!1}return bn.writable};function mE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Pg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fi(async()=>{const{default:r}=await Promise.resolve().then(()=>Yr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},gE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Cn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qt=async(t,e)=>{await t.removeItem(e)};class vo{constructor(){this.promise=new vo.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vo.promiseConstructor=Promise;function hl(t){const e=t.split(".");if(e.length!==3)throw new Iu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nE.test(e[r]))throw new Iu("JWT not in base64url format");return{header:JSON.parse(sf(e[0])),payload:JSON.parse(sf(e[1])),signature:Lr(e[2]),raw:{header:e[0],payload:e[1]}}}async function yE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vE(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function wE(t){return("0"+t.toString(16)).substr(-2)}function _E(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,wE).join("")}async function SE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function EE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await SE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ir(t,e,n=!1){const r=_E();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await pr(t,`${e}-code-verifier`,s);const i=await EE(r);return[i,r===i?"plain":"s256"]}const kE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xE(t){const e=t.headers.get(Au);if(!e||!e.match(kE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ar(t){if(!PE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function af(t){return JSON.parse(JSON.stringify(t))}var RE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const An=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OE=[502,503,504];async function of(t){var e;if(!gE(t))throw new Tu(An(t),0);if(OE.includes(t.status))throw new Tu(An(t),t.status);let n;try{n=await t.json()}catch(i){throw new In(An(i),i)}let r;const s=xE(t);if(s&&s.getTime()>=xg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new tf(An(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Qt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new tf(An(n),t.status,n.weak_password.reasons);throw new sE(An(n),t.status||500,r)}const AE=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function F(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Au]||(i[Au]=xg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await TE(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function TE(t,e,n,r,s,i){const a=AE(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Tu(An(l),0)}if(o.ok||await of(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await of(l)}}function ct(t){var e;let n=null;$E(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=fE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function lf(t){const e=ct(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IE(t){return{data:t,error:null}}function jE(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=RE(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function uf(t){return t}function $E(t){return t.access_token&&t.refresh_token&&t.expires_in}const pl=["global","local","others"];var NE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class LE{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Pg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=pl[0]){if(pl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pl.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:tn})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=NE(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(N(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tn})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:uf});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(N(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ar(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tn})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ar(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:tn})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ar(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:tn})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ar(e.userId);try{const{data:n,error:r}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ar(e.userId),ar(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:uf});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(N(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await F(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await F(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}}function cf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const or={debug:!!(globalThis&&Cg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class UE extends Rg{}async function DE(t,e,n){or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new UE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(or.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function FE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Og(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function ME(t){return parseInt(t,16)}function BE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function zE(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=Og(t.address),v=c?`${c}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${m}

${y}`;let g=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let f=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);f+=`
- ${p}`}g+=f}return`${w}
${g}`}class oe extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Wa extends oe{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function WE({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Tg(a)){if(i.rp.id!==a)return new oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function HE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Tg(r)){if(n.rpId!==r)return new oe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Ag=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class VE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qE=new VE;function KE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Ag(t,["challenge","user","excludeCredentials"]),i=Lr(e).buffer,a=Object.assign(Object.assign({},n),{id:Lr(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Lr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function JE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ag(t,["challenge","allowCredentials"]),s=Lr(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Lr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function GE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Un(new Uint8Array(t.response.attestationObject)),clientDataJSON:Un(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function QE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Un(new Uint8Array(s.authenticatorData)),clientDataJSON:Un(new Uint8Array(s.clientDataJSON)),signature:Un(new Uint8Array(s.signature)),userHandle:s.userHandle?Un(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Tg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function df(){var t,e;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wa("Browser returned unexpected credential type",e)}:{data:null,error:new Wa("Empty credential response",e)}}catch(e){return{data:null,error:WE({error:e,options:t})}}}async function YE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wa("Browser returned unexpected credential type",e)}:{data:null,error:new Wa("Empty credential response",e)}}catch(e){return{data:null,error:HE({error:e,options:t})}}}const ZE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ek={userVerification:"preferred",hints:["security-key"]};function Ha(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(e(a)){const o=r[i];e(o)?r[i]=Ha(o,a):r[i]=Ha(a)}else r[i]=a}return r}function tk(t,e){return Ha(ZE,t,e||{})}function nk(t,e){return Ha(ek,t,e||{})}class rk{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=s??qE.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=tk(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:d}=await XE({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=nk(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:d}=await YE(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(a){return N(a)?{data:null,error:a}:{data:null,error:new In("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new ri("rpId is required for WebAuthn authentication")};try{if(!df())return{data:null,error:new In("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return N(a)?{data:null,error:a}:{data:null,error:new In("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new ri("rpId is required for WebAuthn registration")};try{if(!df())return{data:null,error:new In("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return N(a)?{data:null,error:a}:{data:null,error:new In("Unexpected error in register",a)}}}}FE();const sk={url:ZS,storageKey:eE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hf(t,e,n){return await n()}const lr={};class si{get jwks(){var e,n;return(n=(e=lr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){lr[this.storageKey]=Object.assign(Object.assign({},lr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=lr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lr[this.storageKey]=Object.assign(Object.assign({},lr[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=si.nextInstanceID,si.nextInstanceID+=1,this.instanceID>0&&qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},sk),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new LE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Pg(s.fetch),this.lock=s.lock||hf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=DE:this.lock=hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rk(this)},this.persistSession?(s.storage?this.storage=s.storage:Cg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=cf(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=mE(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),qe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),oE(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return N(n)?{error:n}:{error:new In("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ct}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:d,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await ir(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:ct})}else if("phone"in e){const{phone:c,password:d,options:h}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ct})}else throw new Bi("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(N(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lf})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lf})}else throw new Bi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new sr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,o,l,u,c,d,h;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:g,options:f}=e;let p;if(qe())if(typeof w=="object")p=w;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")p=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=w}const _=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href),x=await p.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Og(x[0]);let E=(r=f==null?void 0:f.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const $=await p.request({method:"eth_chainId"});E=ME($)}const R={domain:_.host,address:k,statement:g,uri:_.href,version:"1",chainId:E,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=f==null?void 0:f.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=zE(R),v=await p.request({method:"personal_sign",params:[BE(m),k]})}try{const{data:y,error:w}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ct});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new sr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(N(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSolana(e){var n,r,s,i,a,o,l,u,c,d,h,m;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:w,wallet:g,statement:f,options:p}=e;let _;if(qe())if(typeof g=="object")_=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const x=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),f?{statement:f}:null));let E;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")E=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)E=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((d=(c=p==null?void 0:p.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...p.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:w,error:g}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Un(y)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ct});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new sr}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(N(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ct});if(await qt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new sr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(N(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ct}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new sr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await ir(this.storage,this.storageKey));const{error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Bi("You must provide either an email or phone number.")}catch(o){if(N(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ct});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ir(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:IE})}catch(i){if(N(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Qt;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(N(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Bi("You must provide either an email or phone number and a type")}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<cl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Cn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=fl()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tn}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:tn})})}catch(n){if(N(n))return aE(n)&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Qt;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await ir(this.storage,this.storageKey));const{data:u,error:c}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:tn});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=hl(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(N(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Qt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(N(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!qe())throw new zi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ef("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new zi("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;l&&(h=parseInt(l));const m=h-c;m*1e3<=fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,c);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(N(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(iE(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=pE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ir(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(N(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:d,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return qe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(N(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:o,token:l,access_token:u,nonce:c}=e,d=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ct}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new sr}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(s){if(N(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vE(async s=>(s>0&&await yE(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ct})),(s,i)=>{const a=200*Math.pow(2,s);return i&&dl(i)&&Date.now()+a-r<fr})}catch(r){if(this._debug(n,"error",r),N(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),qe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Cn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await pr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:fl()}else if(s&&!s.user&&!s.user){const a=await Cn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await qt(this.storage,this.storageKey+"-user"),await pr(this.storage,this.storageKey,s)):s.user=fl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${cl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),dl(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new vo;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Qt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),N(i)){const a={data:null,error:i};return dl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await pr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=af(s);await pr(this.storage,this.storageKey,i)}else{const s=af(n);await pr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await qt(this.storage,this.storageKey),await qt(this.storage,this.storageKey+"-code-verifier"),await qt(this.storage,this.storageKey+"-user"),this.userStorage&&await qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fr}ms, refresh threshold is ${Ou} ticks`),s<=Ou&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Rg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await ir(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?GE(e.webauthn.credential_response):QE(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:KE(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:JE(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(N(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=hl(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+rE>s)return r;const{data:i,error:a}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=hl(r);n!=null&&n.allowExpired||bE(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const c=CE(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,hE(`${o}.${l}`)))throw new Iu("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}}si.nextInstanceID=0;const ik=si;class ak extends ik{constructor(e){super(e)}}var ok=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class lk{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const o=YS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:zS,realtime:HS,auth:Object.assign(Object.assign({},WS),{storageKey:l}),global:BS},c=XS(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=JS(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new sS(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new DS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new L0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return ok(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:o,lock:l,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ak({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:o,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new SS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uk=(t,e,n)=>new lk(t,e,n);function ck(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ck()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dk="https://cmewyvtbeefgjmlsugua.supabase.co",hk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNtZXd5dnRiZWVmZ2ptbHN1Z3VhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNjAzNTgsImV4cCI6MjA3NTczNjM1OH0._F5yuEwnIyYwfHd6oHczLyiXJ71Wb-6yZX35cd6xBwc",nn=uk(dk,hk),Ig=b.createContext(void 0);function fk({children:t}){const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,a]=b.useState(!0);b.useEffect(()=>{nn.auth.getSession().then(({data:{session:d}})=>{s(d),n((d==null?void 0:d.user)??null),a(!1)});const{data:{subscription:c}}=nn.auth.onAuthStateChange((d,h)=>{(async()=>(s(h),n((h==null?void 0:h.user)??null)))()});return()=>c.unsubscribe()},[]);const o=async(c,d)=>{const{error:h}=await nn.auth.signUp({email:c,password:d});if(h)throw h},l=async(c,d)=>{const{error:h}=await nn.auth.signInWithPassword({email:c,password:d});if(h)throw h},u=async()=>{const{error:c}=await nn.auth.signOut();if(c)throw c};return S.jsx(Ig.Provider,{value:{user:e,session:r,loading:i,signUp:o,signIn:l,signOut:u},children:t})}function wo(){const t=b.useContext(Ig);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ju="RFC3986",$u={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},pk="RFC1738",mk=Array.isArray,Et=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ml=1024,gk=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=ml){const l=i.length>=ml?i.slice(o,o+ml):i,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===pk&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=Et[d];continue}if(d<2048){u[u.length]=Et[192|d>>6]+Et[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Et[224|d>>12]+Et[128|d>>6&63]+Et[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Et[240|d>>18]+Et[128|d>>12&63]+Et[128|d>>6&63]+Et[128|d&63]}a+=u.join("")}return a};function yk(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function ff(t,e){if(mk(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const vk=Object.prototype.hasOwnProperty,jg={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},bt=Array.isArray,wk=Array.prototype.push,$g=function(t,e){wk.apply(t,bt(e)?e:[e])},_k=Date.prototype.toISOString,fe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:gk,encodeValuesOnly:!1,format:ju,formatter:$u[ju],indices:!1,serializeDate(t){return _k.call(t)},skipNulls:!1,strictNullHandling:!1};function Sk(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const gl={};function Ng(t,e,n,r,s,i,a,o,l,u,c,d,h,m,v,y,w,g){let f=t,p=g,_=0,x=!1;for(;(p=p.get(gl))!==void 0&&!x;){const T=p.get(t);if(_+=1,typeof T<"u"){if(T===_)throw new RangeError("Cyclic object value");x=!0}typeof p.get(gl)>"u"&&(_=0)}if(typeof u=="function"?f=u(e,f):f instanceof Date?f=h==null?void 0:h(f):n==="comma"&&bt(f)&&(f=ff(f,function(T){return T instanceof Date?h==null?void 0:h(T):T})),f===null){if(i)return l&&!y?l(e,fe.encoder,w,"key",m):e;f=""}if(Sk(f)||yk(f)){if(l){const T=y?e:l(e,fe.encoder,w,"key",m);return[(v==null?void 0:v(T))+"="+(v==null?void 0:v(l(f,fe.encoder,w,"value",m)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(f)))]}const k=[];if(typeof f>"u")return k;let E;if(n==="comma"&&bt(f))y&&l&&(f=ff(f,l)),E=[{value:f.length>0?f.join(",")||null:void 0}];else if(bt(u))E=u;else{const T=Object.keys(f);E=c?T.sort(c):T}const R=o?String(e).replace(/\./g,"%2E"):String(e),$=r&&bt(f)&&f.length===1?R+"[]":R;if(s&&bt(f)&&f.length===0)return $+"[]";for(let T=0;T<E.length;++T){const z=E[T],ae=typeof z=="object"&&typeof z.value<"u"?z.value:f[z];if(a&&ae===null)continue;const lt=d&&o?z.replace(/\./g,"%2E"):z,Yn=bt(f)?typeof n=="function"?n($,lt):$:$+(d?"."+lt:"["+lt+"]");g.set(t,_);const Zn=new WeakMap;Zn.set(gl,g),$g(k,Ng(ae,Yn,n,r,s,i,a,o,n==="comma"&&y&&bt(f)?null:l,u,c,d,h,m,v,y,w,Zn))}return k}function Ek(t=fe){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||fe.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ju;if(typeof t.format<"u"){if(!vk.call($u,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=$u[n];let s=fe.filter;(typeof t.filter=="function"||bt(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in jg?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=fe.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:fe.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:fe.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:fe.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:fe.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?fe.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:fe.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:fe.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:fe.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:fe.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:fe.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:fe.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:fe.strictNullHandling}}function kk(t,e={}){let n=t;const r=Ek(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):bt(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=jg[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const u=new WeakMap;for(let h=0;h<s.length;++h){const m=s[h];r.skipNulls&&n[m]===null||$g(a,Ng(n[m],m,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=a.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}const mr="4.104.0";let pf=!1,Ls,Lg,Ug,Nu,Dg,Fg,Mg,Bg,zg;function xk(t,e={auto:!1}){if(pf)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ls)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ls}'\``);pf=e.auto,Ls=t.kind,Lg=t.fetch,Ug=t.FormData,Nu=t.File,Dg=t.ReadableStream,Fg=t.getMultipartRequestOptions,Mg=t.getDefaultAgent,Bg=t.fileFromPath,zg=t.isFsReadStream}class bk{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Ck({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new bk(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}const Wg=()=>{Ls||xk(Ck(),{auto:!0})};Wg();class L extends Error{}class be extends L{constructor(e,n,r,s){super(`${be.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new _o({message:r,cause:Uu(n)});const i=n==null?void 0:n.error;return e===400?new Hg(e,i,r,s):e===401?new Vg(e,i,r,s):e===403?new qg(e,i,r,s):e===404?new Kg(e,i,r,s):e===409?new Jg(e,i,r,s):e===422?new Gg(e,i,r,s):e===429?new Qg(e,i,r,s):e>=500?new Xg(e,i,r,s):new be(e,i,r,s)}}class rt extends be{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _o extends be{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class qc extends _o{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Hg extends be{}class Vg extends be{}class qg extends be{}class Kg extends be{}class Jg extends be{}class Gg extends be{}class Qg extends be{}class Xg extends be{}class Yg extends L{constructor(){super("Could not parse response content as the length limit was reached")}}class Zg extends L{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Wi=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Pn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ve;class So{constructor(){Ve.set(this,void 0),this.buffer=new Uint8Array,Wi(this,Ve,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const s=[];let i;for(;(i=Pk(this.buffer,Pn(this,Ve,"f")))!=null;){if(i.carriage&&Pn(this,Ve,"f")==null){Wi(this,Ve,i.index,"f");continue}if(Pn(this,Ve,"f")!=null&&(i.index!==Pn(this,Ve,"f")+1||i.carriage)){s.push(this.decodeText(this.buffer.slice(0,Pn(this,Ve,"f")-1))),this.buffer=this.buffer.slice(Pn(this,Ve,"f")),Wi(this,Ve,null,"f");continue}const a=Pn(this,Ve,"f")!==null?i.preceding-1:i.preceding,o=this.decodeText(this.buffer.slice(0,a));s.push(o),this.buffer=this.buffer.slice(i.index),Wi(this,Ve,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new L(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new L(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new L("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ve=new WeakMap;So.NEWLINE_CHARS=new Set([`
`,"\r"]);So.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pk(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Rk(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function ey(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Rt{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of Ok(e,n))if(!i){if(a.data.startsWith("[DONE]")){i=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new be(void 0,o.error,void 0,oy(e.headers));yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new be(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||n.abort()}}return new Rt(s,n)}static fromReadableStream(e,n){let r=!1;async function*s(){const a=new So,o=ey(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of s())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Rt(i,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new Rt(()=>s(e),this.controller),new Rt(()=>s(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new Dg({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:a}=await n.next();if(a)return s.close();const o=r.encode(JSON.stringify(i)+`
`);s.enqueue(o)}catch(i){s.error(i)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*Ok(t,e){if(!t.body)throw e.abort(),new L("Attempted to iterate over a response with no body");const n=new Tk,r=new So,s=ey(t.body);for await(const i of Ak(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*Ak(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=Rk(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Tk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=Ik(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Ik(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const ty=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",ny=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Eo(t),Eo=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",jk=t=>ny(t)||ty(t)||zg(t);async function ry(t,e,n){var s;if(t=await t,ny(t))return t;if(ty(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Eo(i)?[await i.arrayBuffer()]:[i];return new Nu(a,e,n)}const r=await $k(t);if(e||(e=Lk(t)??"unknown_file"),!(n!=null&&n.type)){const i=(s=r[0])==null?void 0:s.type;typeof i=="string"&&(n={...n,type:i})}return new Nu(r,e,n)}async function $k(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Eo(t))e.push(await t.arrayBuffer());else if(Uk(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${Nk(t)}`);return e}function Nk(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function Lk(t){var e;return yl(t.name)||yl(t.filename)||((e=yl(t.path))==null?void 0:e.split(/[\\/]/).pop())}const yl=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},Uk=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",mf=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",qn=async t=>{const e=await Dk(t.body);return Fg(e,t)},Dk=async t=>{const e=new Ug;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Lu(e,n,r))),e},Lu=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(jk(n)){const r=await ry(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Lu(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Lu(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Ur={},Fk=function(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},Mk=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Hi;Wg();async function sy(t){var a;const{response:e}=t;if(t.options.stream)return gn("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Rt.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(a=n==null?void 0:n.split(";")[0])==null?void 0:a.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const o=await e.json();return gn("response",e.status,e.url,e.headers,o),iy(o,e)}const i=await e.text();return gn("response",e.status,e.url,e.headers,i),i}function iy(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class ko extends Promise{constructor(e,n=sy){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new ko(this.responsePromise,async n=>iy(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Bk{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:i}){this.baseURL=e,this.maxRetries=vl("maxRetries",n),this.timeout=vl("timeout",r),this.httpAgent=s,this.fetch=i??Lg}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...qk(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Qk()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async s=>{const i=s&&Eo(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:n,...s,body:i}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var y;const r={...e},{method:s,path:i,query:a,headers:o={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:mf(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,u=this.calculateContentLength(l),c=this.buildURL(i,a);"timeout"in r&&vl("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??Mg(c),h=r.timeout+1e3;typeof((y=d==null?void 0:d.options)==null?void 0:y.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:r,headers:o,contentLength:u,retryCount:n});return{req:{method:s,...l&&{body:l},headers:m,...d&&{agent:d},signal:r.signal??null},url:c,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:s}){const i={};r&&(i["content-length"]=r);const a=this.defaultHeaders(e);return wf(i,a),wf(i,n),mf(e.body)&&Ls!=="node"&&delete i["content-type"],qi(a,"x-stainless-retry-count")===void 0&&qi(n,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(s)),qi(a,"x-stainless-timeout")===void 0&&qi(n,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,s){return be.generate(e,n,r,s)}request(e,n=null){return new ko(this.makeRequest(e,n))}async makeRequest(e,n){var d,h;const r=await e,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:i,url:a,timeout:o}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(i,{url:a,options:r}),gn("request",a,r,i.headers),(d=r.signal)!=null&&d.aborted)throw new rt;const l=new AbortController,u=await this.fetchWithTimeout(a,i,o,l).catch(Uu);if(u instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new rt;if(n)return this.retryRequest(r,n);throw u.name==="AbortError"?new qc:new _o({cause:u})}const c=oy(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){const f=`retrying, ${n} attempts remaining`;return gn(`response (error; ${f})`,u.status,a,c),this.retryRequest(r,n,c)}const m=await u.text().catch(f=>Uu(f).message),v=Kk(m),y=v?void 0:m;throw gn(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,c,y),this.makeStatusError(u.status,v,y,c)}return{response:u,options:r,controller:l}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new zk(this,r,e)}buildURL(e,n){const r=Gk(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return ly(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new L(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,s){const{signal:i,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const o=setTimeout(()=>s.abort(),r),l={signal:s.signal,...a};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let s;const i=r==null?void 0:r["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(s=o)}const a=r==null?void 0:r["retry-after"];if(a&&!s){const o=parseFloat(a);Number.isNaN(o)?s=Date.parse(a)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,o)}return await gi(s),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${mr}`}}class ay{constructor(e,n,r,s){Hi.set(this,void 0),Fk(this,Hi,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new L("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[s,i]of r)e.url.searchParams.set(s,i);n.query=void 0,n.path=e.url.toString()}return await Mk(this,Hi,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Hi=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class zk extends ko{constructor(e,n,r){super(n,async s=>new r(e,s.response,await sy(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const oy=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),Wk={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},re=t=>typeof t=="object"&&t!==null&&!ly(t)&&Object.keys(t).every(e=>uy(Wk,e)),Hk=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mr,"X-Stainless-OS":yf(Deno.build.os),"X-Stainless-Arch":gf(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mr,"X-Stainless-OS":yf(process.platform),"X-Stainless-Arch":gf(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=Vk();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":mr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Vk(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const gf=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",yf=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let vf;const qk=()=>vf??(vf=Hk()),Kk=t=>{try{return JSON.parse(t)}catch{return}},Jk=/^[a-z][a-z0-9+.-]*:/i,Gk=t=>Jk.test(t),gi=t=>new Promise(e=>setTimeout(e,t)),vl=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new L(`${t} must be an integer`);if(e<0)throw new L(`${t} must be a positive integer`);return e},Uu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},Vi=t=>{var e,n,r,s;if(typeof process<"u")return((e=Ur==null?void 0:Ur[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};function ly(t){if(!t)return!0;for(const e in t)return!1;return!0}function uy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wf(t,e){for(const n in e){if(!uy(e,n))continue;const r=n.toLowerCase();if(!r)continue;const s=e[n];s===null?delete t[r]:s!==void 0&&(t[r]=s)}}const _f=new Set(["authorization","api-key"]);function gn(t,...e){if(typeof process<"u"&&(Ur==null?void 0:Ur.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const i={...r,headers:{...r.headers}};for(const a in r.headers)_f.has(a.toLowerCase())&&(i.headers[a]="REDACTED");return i}let s=null;for(const i in r)_f.has(i.toLowerCase())&&(s??(s={...r}),s[i]="REDACTED");return s??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const Qk=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Xk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Yk=t=>typeof(t==null?void 0:t.get)=="function",qi=(t,e)=>{var r;const n=e.toLowerCase();if(Yk(t)){const s=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,a,o)=>a+o.toUpperCase());for(const i of[e,n,e.toUpperCase(),s]){const a=t.get(i);if(a)return a}}for(const[s,i]of Object.entries(t))if(s.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},Zk=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};function wl(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class xo extends ay{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ge extends ay{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class U{constructor(e){this._client=e}}let cy=class extends U{list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,ex,{query:n,...r})}},bo=class extends U{constructor(){super(...arguments),this.messages=new cy(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/chat/completions",Co,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Co extends ge{}class ex extends ge{}bo.ChatCompletionsPage=Co;bo.Messages=cy;let Po=class extends U{constructor(){super(...arguments),this.completions=new bo(this._client)}};Po.Completions=bo;Po.ChatCompletionsPage=Co;class dy extends U{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class hy extends U{create(e,n){return this._client.post("/audio/transcriptions",qn({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class fy extends U{create(e,n){return this._client.post("/audio/translations",qn({body:e,...n,__metadata:{model:e.model}}))}}class yi extends U{constructor(){super(...arguments),this.transcriptions=new hy(this._client),this.translations=new fy(this._client),this.speech=new dy(this._client)}}yi.Transcriptions=hy;yi.Translations=fy;yi.Speech=dy;class Kc extends U{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/batches",Jc,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Jc extends ge{}Kc.BatchesPage=Jc;var dt=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Z=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Du,ca,da,vs,ws,ha,_s,jt,Ss,Va,qa,gr,py;class Gc{constructor(){Du.add(this),this.controller=new AbortController,ca.set(this,void 0),da.set(this,()=>{}),vs.set(this,()=>{}),ws.set(this,void 0),ha.set(this,()=>{}),_s.set(this,()=>{}),jt.set(this,{}),Ss.set(this,!1),Va.set(this,!1),qa.set(this,!1),gr.set(this,!1),dt(this,ca,new Promise((e,n)=>{dt(this,da,e,"f"),dt(this,vs,n,"f")}),"f"),dt(this,ws,new Promise((e,n)=>{dt(this,ha,e,"f"),dt(this,_s,n,"f")}),"f"),Z(this,ca,"f").catch(()=>{}),Z(this,ws,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Z(this,Du,"m",py).bind(this))},0)}_connected(){this.ended||(Z(this,da,"f").call(this),this._emit("connect"))}get ended(){return Z(this,Ss,"f")}get errored(){return Z(this,Va,"f")}get aborted(){return Z(this,qa,"f")}abort(){this.controller.abort()}on(e,n){return(Z(this,jt,"f")[e]||(Z(this,jt,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Z(this,jt,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(Z(this,jt,"f")[e]||(Z(this,jt,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{dt(this,gr,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){dt(this,gr,!0,"f"),await Z(this,ws,"f")}_emit(e,...n){if(Z(this,Ss,"f"))return;e==="end"&&(dt(this,Ss,!0,"f"),Z(this,ha,"f").call(this));const r=Z(this,jt,"f")[e];if(r&&(Z(this,jt,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!Z(this,gr,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Z(this,vs,"f").call(this,s),Z(this,_s,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!Z(this,gr,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Z(this,vs,"f").call(this,s),Z(this,_s,"f").call(this,s),this._emit("end")}}_emitFinal(){}}ca=new WeakMap,da=new WeakMap,vs=new WeakMap,ws=new WeakMap,ha=new WeakMap,_s=new WeakMap,jt=new WeakMap,Ss=new WeakMap,Va=new WeakMap,qa=new WeakMap,gr=new WeakMap,Du=new WeakSet,py=function(e){if(dt(this,Va,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new rt),e instanceof rt)return dt(this,qa,!0,"f"),this._emit("abort",e);if(e instanceof L)return this._emit("error",e);if(e instanceof Error){const n=new L(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new L(String(e)))};var j=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},He=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Ee,Fu,Ct,fa,ft,Dn,Or,jn,Ka,Ke,pa,ma,Us,Es,ks,Sf,Ef,kf,xf,bf,Cf,Pf;class yt extends Gc{constructor(){super(...arguments),Ee.add(this),Fu.set(this,[]),Ct.set(this,{}),fa.set(this,{}),ft.set(this,void 0),Dn.set(this,void 0),Or.set(this,void 0),jn.set(this,void 0),Ka.set(this,void 0),Ke.set(this,void 0),pa.set(this,void 0),ma.set(this,void 0),Us.set(this,void 0)}[(Fu=new WeakMap,Ct=new WeakMap,fa=new WeakMap,ft=new WeakMap,Dn=new WeakMap,Or=new WeakMap,jn=new WeakMap,Ka=new WeakMap,Ke=new WeakMap,pa=new WeakMap,ma=new WeakMap,Us=new WeakMap,Ee=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new yt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Rt.fromReadableStream(e,this.controller);for await(const a of s)j(this,Ee,"m",Es).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new rt;return this._addRun(j(this,Ee,"m",ks).call(this))}toReadableStream(){return new Rt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s,i){const a=new yt;return a._run(()=>a._runToolAssistantStream(e,n,r,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s,i){var u;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},l=await e.submitToolOutputs(n,r,o,{...i,signal:this.controller.signal});this._connected();for await(const c of l)j(this,Ee,"m",Es).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new rt;return this._addRun(j(this,Ee,"m",ks).call(this))}static createThreadAssistantStream(e,n,r){const s=new yt;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new yt;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return j(this,pa,"f")}currentRun(){return j(this,ma,"f")}currentMessageSnapshot(){return j(this,ft,"f")}currentRunStepSnapshot(){return j(this,Us,"f")}async finalRunSteps(){return await this.done(),Object.values(j(this,Ct,"f"))}async finalMessages(){return await this.done(),Object.values(j(this,fa,"f"))}async finalRun(){if(await this.done(),!j(this,Dn,"f"))throw Error("Final run was not received.");return j(this,Dn,"f")}async _createThreadAssistantStream(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of a)j(this,Ee,"m",Es).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new rt;return this._addRun(j(this,Ee,"m",ks).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const u of o)j(this,Ee,"m",Es).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new rt;return this._addRun(j(this,Ee,"m",ks).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(wl(i)&&wl(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!wl(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s,i){return await this._createToolAssistantStream(r,e,n,s,i)}}Es=function(e){if(!this.ended)switch(He(this,pa,e,"f"),j(this,Ee,"m",kf).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":j(this,Ee,"m",Pf).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":j(this,Ee,"m",Ef).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":j(this,Ee,"m",Sf).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ks=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");if(!j(this,Dn,"f"))throw Error("Final run has not been received");return j(this,Dn,"f")},Sf=function(e){const[n,r]=j(this,Ee,"m",bf).call(this,e,j(this,ft,"f"));He(this,ft,n,"f"),j(this,fa,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=j(this,Or,"f")){if(j(this,jn,"f"))switch(j(this,jn,"f").type){case"text":this._emit("textDone",j(this,jn,"f").text,j(this,ft,"f"));break;case"image_file":this._emit("imageFileDone",j(this,jn,"f").image_file,j(this,ft,"f"));break}He(this,Or,s.index,"f")}He(this,jn,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(j(this,Or,"f")!==void 0){const s=e.data.content[j(this,Or,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,j(this,ft,"f"));break;case"text":this._emit("textDone",s.text,j(this,ft,"f"));break}}j(this,ft,"f")&&this._emit("messageDone",e.data),He(this,ft,void 0,"f")}},Ef=function(e){const n=j(this,Ee,"m",xf).call(this,e);switch(He(this,Us,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==j(this,Ka,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(j(this,Ke,"f")&&this._emit("toolCallDone",j(this,Ke,"f")),He(this,Ka,i.index,"f"),He(this,Ke,n.step_details.tool_calls[i.index],"f"),j(this,Ke,"f")&&this._emit("toolCallCreated",j(this,Ke,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":He(this,Us,void 0,"f"),e.data.step_details.type=="tool_calls"&&j(this,Ke,"f")&&(this._emit("toolCallDone",j(this,Ke,"f")),He(this,Ke,void 0,"f")),this._emit("runStepDone",e.data,n);break}},kf=function(e){j(this,Fu,"f").push(e),this._emit("event",e)},xf=function(e){switch(e.event){case"thread.run.step.created":return j(this,Ct,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=j(this,Ct,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=yt.accumulateDelta(n,r.delta);j(this,Ct,"f")[e.data.id]=s}return j(this,Ct,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":j(this,Ct,"f")[e.data.id]=e.data;break}if(j(this,Ct,"f")[e.data.id])return j(this,Ct,"f")[e.data.id];throw new Error("No snapshot available")},bf=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=j(this,Ee,"m",Cf).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Cf=function(e,n){return yt.accumulateDelta(n,e)},Pf=function(e){switch(He(this,ma,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":He(this,Dn,e.data,"f"),j(this,Ke,"f")&&(this._emit("toolCallDone",j(this,Ke,"f")),He(this,Ke,void 0,"f"));break}};class Qc extends U{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/assistants",Xc,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Xc extends ge{}Qc.AssistantsPage=Xc;function Rf(t){return typeof t.parse=="function"}const Dr=t=>(t==null?void 0:t.role)==="assistant",my=t=>(t==null?void 0:t.role)==="function",gy=t=>(t==null?void 0:t.role)==="tool";function Yc(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function vi(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function tx(t,e){return!e||!yy(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Zc(t,e)}function Zc(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new Yg;if(r.finish_reason==="content_filter")throw new Zg;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>rx(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?nx(e,r.message.content):null}}});return{...t,choices:n}}function nx(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function rx(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:vi(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function sx(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return vi(n)||(n==null?void 0:n.function.strict)||!1}function yy(t){var e;return Yc(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>vi(n)||n.type==="function"&&n.function.strict===!0))??!1}function ix(t){for(const e of t??[]){if(e.type!=="function")throw new L(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new L(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Le=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Re,Mu,Ja,Bu,zu,Wu,vy,Hu;const Of=10;class wy extends Gc{constructor(){super(...arguments),Re.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(my(e)||gy(e))&&e.content)this._emit("functionCallResult",e.content);else if(Dr(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Dr(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new L("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Le(this,Re,"m",Mu).call(this)}async finalMessage(){return await this.done(),Le(this,Re,"m",Ja).call(this)}async finalFunctionCall(){return await this.done(),Le(this,Re,"m",Bu).call(this)}async finalFunctionCallResult(){return await this.done(),Le(this,Re,"m",zu).call(this)}async totalUsage(){return await this.done(),Le(this,Re,"m",Wu).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Le(this,Re,"m",Ja).call(this);n&&this._emit("finalMessage",n);const r=Le(this,Re,"m",Mu).call(this);r&&this._emit("finalContent",r);const s=Le(this,Re,"m",Bu).call(this);s&&this._emit("finalFunctionCall",s);const i=Le(this,Re,"m",zu).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Le(this,Re,"m",Wu).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Le(this,Re,"m",vy).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Zc(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var h;const s="function",{function_call:i="auto",stream:a,...o}=n,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:u=Of}=r||{},c={};for(const m of n.functions)c[m.name||m.function.name]=m;const d=n.functions.map(m=>({name:m.name||m.function.name,parameters:m.parameters,description:m.description}));for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<u;++m){const y=(h=(await this._createChatCompletion(e,{...o,function_call:i,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!y)throw new L("missing message in ChatCompletion response");if(!y.function_call)return;const{name:w,arguments:g}=y.function_call,f=c[w];if(f){if(l&&l!==w){const k=`Invalid function_call: ${JSON.stringify(w)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:w,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(w)}. Available options are: ${d.map(E=>JSON.stringify(E.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:w,content:k});continue}let p;try{p=Rf(f)?await f.parse(g):g}catch(k){this._addMessage({role:s,name:w,content:k instanceof Error?k.message:String(k)});continue}const _=await f.function(p,this),x=Le(this,Re,"m",Hu).call(this,_);if(this._addMessage({role:s,name:w,content:x}),l)return}}async _runTools(e,n,r){var m,v,y;const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&((m=i==null?void 0:i.function)==null?void 0:m.name),{maxChatCompletions:u=Of}=r||{},c=n.tools.map(w=>{if(vi(w)){if(!w.$callback)throw new L("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),d={};for(const w of c)w.type==="function"&&(d[w.function.name||w.function.function.name]=w.function);const h="tools"in n?c.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<u;++w){const f=(v=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!f)throw new L("missing message in ChatCompletion response");if(!((y=f.tool_calls)!=null&&y.length))return;for(const p of f.tool_calls){if(p.type!=="function")continue;const _=p.id,{name:x,arguments:k}=p.function,E=d[x];if(E){if(l&&l!==x){const z=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:z});continue}}else{const z=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${Object.keys(d).map(ae=>JSON.stringify(ae)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:z});continue}let R;try{R=Rf(E)?await E.parse(k):k}catch(z){const ae=z instanceof Error?z.message:String(z);this._addMessage({role:s,tool_call_id:_,content:ae});continue}const $=await E.function(R,this),T=Le(this,Re,"m",Hu).call(this,$);if(this._addMessage({role:s,tool_call_id:_,content:T}),l)return}}}}Re=new WeakSet,Mu=function(){return Le(this,Re,"m",Ja).call(this).content??null},Ja=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Dr(n)){const{function_call:r,...s}=n,i={...s,content:n.content??null,refusal:n.refusal??null};return r&&(i.function_call=r),i}}throw new L("stream ended without producing a ChatCompletionMessage with role=assistant")},Bu=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Dr(s)&&(s!=null&&s.function_call))return s.function_call;if(Dr(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},zu=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(my(n)&&n.content!=null||gy(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Wu=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},vy=function(e){if(e.n!=null&&e.n>1)throw new L("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Hu=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ii extends wy{static runFunctions(e,n,r){const s=new ii,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new ii,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),Dr(e)&&e.content&&this._emit("content",e.content)}}const _y=1,Sy=2,Ey=4,ky=8,xy=16,by=32,Cy=64,Py=128,Ry=256,Oy=Py|Ry,Ay=xy|by|Oy|Cy,Ty=_y|Sy|Ay,Iy=Ey|ky,ax=Ty|Iy,ve={STR:_y,NUM:Sy,ARR:Ey,OBJ:ky,NULL:xy,BOOL:by,NAN:Cy,INFINITY:Py,MINUS_INFINITY:Ry,INF:Oy,SPECIAL:Ay,ATOM:Ty,COLLECTION:Iy,ALL:ax};class ox extends Error{}class lx extends Error{}function ux(t,e=ve.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return cx(t.trim(),e)}const cx=(t,e)=>{const n=t.length;let r=0;const s=h=>{throw new ox(`${h} at position ${r}`)},i=h=>{throw new lx(`${h} at position ${r}`)},a=()=>(d(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||ve.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||ve.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||ve.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||ve.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||ve.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||ve.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),o=()=>{const h=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(h,++r-Number(m)))}catch(v){i(String(v))}else if(ve.STR&e)try{return JSON.parse(t.substring(h,r-Number(m))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,d();const h={};try{for(;t[r]!=="}";){if(d(),r>=n&&ve.OBJ&e)return h;const m=o();d(),r++;try{const v=a();Object.defineProperty(h,m,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(ve.OBJ&e)return h;throw v}d(),t[r]===","&&r++}}catch{if(ve.OBJ&e)return h;s("Expected '}' at end of object")}return r++,h},u=()=>{r++;const h=[];try{for(;t[r]!=="]";)h.push(a()),d(),t[r]===","&&r++}catch{if(ve.ARR&e)return h;s("Expected ']' at end of array")}return r++,h},c=()=>{if(r===0){t==="-"&&ve.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(ve.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(m))}}const h=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(ve.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(h,r))}catch{t.substring(h,r)==="-"&&ve.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(v){i(String(v))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},Af=t=>ux(t,ve.ALL^ve.NUM);var ur=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},K=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},de,It,cr,Kt,_l,Ki,Sl,El,kl,Ji,xl,Tf;class ai extends wy{constructor(e){super(),de.add(this),It.set(this,void 0),cr.set(this,void 0),Kt.set(this,void 0),ur(this,It,e,"f"),ur(this,cr,[],"f")}get currentChatCompletionSnapshot(){return K(this,Kt,"f")}static fromReadableStream(e){const n=new ai(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new ai(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),K(this,de,"m",_l).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)K(this,de,"m",Sl).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new rt;return this._addChatCompletion(K(this,de,"m",Ji).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),K(this,de,"m",_l).call(this),this._connected();const s=Rt.fromReadableStream(e,this.controller);let i;for await(const o of s)i&&i!==o.id&&this._addChatCompletion(K(this,de,"m",Ji).call(this)),K(this,de,"m",Sl).call(this,o),i=o.id;if((a=s.controller.signal)!=null&&a.aborted)throw new rt;return this._addChatCompletion(K(this,de,"m",Ji).call(this))}[(It=new WeakMap,cr=new WeakMap,Kt=new WeakMap,de=new WeakSet,_l=function(){this.ended||ur(this,Kt,void 0,"f")},Ki=function(n){let r=K(this,cr,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},K(this,cr,"f")[n.index]=r,r)},Sl=function(n){var s,i,a,o,l,u,c,d,h,m,v,y,w,g,f;if(this.ended)return;const r=K(this,de,"m",Tf).call(this,n);this._emit("chunk",n,r);for(const p of n.choices){const _=r.choices[p.index];p.delta.content!=null&&((s=_.message)==null?void 0:s.role)==="assistant"&&((i=_.message)!=null&&i.content)&&(this._emit("content",p.delta.content,_.message.content),this._emit("content.delta",{delta:p.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),p.delta.refusal!=null&&((a=_.message)==null?void 0:a.role)==="assistant"&&((o=_.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:p.delta.refusal,snapshot:_.message.refusal}),((l=p.logprobs)==null?void 0:l.content)!=null&&((u=_.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=p.logprobs)==null?void 0:c.content,snapshot:((d=_.logprobs)==null?void 0:d.content)??[]}),((h=p.logprobs)==null?void 0:h.refusal)!=null&&((m=_.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=p.logprobs)==null?void 0:v.refusal,snapshot:((y=_.logprobs)==null?void 0:y.refusal)??[]});const x=K(this,de,"m",Ki).call(this,_);_.finish_reason&&(K(this,de,"m",kl).call(this,_),x.current_tool_call_index!=null&&K(this,de,"m",El).call(this,_,x.current_tool_call_index));for(const k of p.delta.tool_calls??[])x.current_tool_call_index!==k.index&&(K(this,de,"m",kl).call(this,_),x.current_tool_call_index!=null&&K(this,de,"m",El).call(this,_,x.current_tool_call_index)),x.current_tool_call_index=k.index;for(const k of p.delta.tool_calls??[]){const E=(w=_.message.tool_calls)==null?void 0:w[k.index];E!=null&&E.type&&((E==null?void 0:E.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(g=E.function)==null?void 0:g.name,index:k.index,arguments:E.function.arguments,parsed_arguments:E.function.parsed_arguments,arguments_delta:((f=k.function)==null?void 0:f.arguments)??""}):(E==null||E.type,void 0))}}},El=function(n,r){var a,o,l;if(K(this,de,"m",Ki).call(this,n).done_tool_calls.has(r))return;const i=(a=n.message.tool_calls)==null?void 0:a[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(o=K(this,It,"f"))==null?void 0:o.tools)==null?void 0:l.find(c=>c.type==="function"&&c.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:vi(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},kl=function(n){var s,i;const r=K(this,de,"m",Ki).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=K(this,de,"m",xl).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ji=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const n=K(this,Kt,"f");if(!n)throw new L("request ended without sending any chunks");return ur(this,Kt,void 0,"f"),ur(this,cr,[],"f"),dx(n,K(this,It,"f"))},xl=function(){var r;const n=(r=K(this,It,"f"))==null?void 0:r.response_format;return Yc(n)?n:null},Tf=function(n){var r,s,i,a;let o=K(this,Kt,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=ur(this,Kt,{...u,choices:[]},"f");for(const{delta:c,finish_reason:d,index:h,logprobs:m=null,...v}of n.choices){let y=o.choices[h];if(y||(y=o.choices[h]={finish_reason:d,index:h,message:{},logprobs:m,...v}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:k,refusal:E,...R}=m;Object.assign(y.logprobs,R),k&&((r=y.logprobs).content??(r.content=[]),y.logprobs.content.push(...k)),E&&((s=y.logprobs).refusal??(s.refusal=[]),y.logprobs.refusal.push(...E))}if(d&&(y.finish_reason=d,K(this,It,"f")&&yy(K(this,It,"f")))){if(d==="length")throw new Yg;if(d==="content_filter")throw new Zg}if(Object.assign(y,v),!c)continue;const{content:w,refusal:g,function_call:f,role:p,tool_calls:_,...x}=c;if(Object.assign(y.message,x),g&&(y.message.refusal=(y.message.refusal||"")+g),p&&(y.message.role=p),f&&(y.message.function_call?(f.name&&(y.message.function_call.name=f.name),f.arguments&&((i=y.message.function_call).arguments??(i.arguments=""),y.message.function_call.arguments+=f.arguments)):y.message.function_call=f),w&&(y.message.content=(y.message.content||"")+w,!y.message.refusal&&K(this,de,"m",xl).call(this)&&(y.message.parsed=Af(y.message.content))),_){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:k,id:E,type:R,function:$,...T}of _){const z=(a=y.message.tool_calls)[k]??(a[k]={});Object.assign(z,T),E&&(z.id=E),R&&(z.type=R),$&&(z.function??(z.function={name:$.name??"",arguments:""})),$!=null&&$.name&&(z.function.name=$.name),$!=null&&$.arguments&&(z.function.arguments+=$.arguments,sx(K(this,It,"f"),z)&&(z.function.parsed_arguments=Af(z.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Rt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function dx(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:h,...m})=>{if(!c)throw new L(`missing finish_reason for choice ${d}`);const{content:v=null,function_call:y,tool_calls:w,...g}=u,f=u.role;if(!f)throw new L(`missing role for choice ${d}`);if(y){const{arguments:p,name:_}=y;if(p==null)throw new L(`missing function_call.arguments for choice ${d}`);if(!_)throw new L(`missing function_call.name for choice ${d}`);return{...m,message:{content:v,function_call:{arguments:p,name:_},role:f,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:h}}return w?{...m,index:d,finish_reason:c,logprobs:h,message:{...g,role:f,content:v,refusal:u.refusal??null,tool_calls:w.map((p,_)=>{const{function:x,type:k,id:E,...R}=p,{arguments:$,name:T,...z}=x||{};if(E==null)throw new L(`missing choices[${d}].tool_calls[${_}].id
${Gi(t)}`);if(k==null)throw new L(`missing choices[${d}].tool_calls[${_}].type
${Gi(t)}`);if(T==null)throw new L(`missing choices[${d}].tool_calls[${_}].function.name
${Gi(t)}`);if($==null)throw new L(`missing choices[${d}].tool_calls[${_}].function.arguments
${Gi(t)}`);return{...R,id:E,type:k,function:{...z,name:T,arguments:$}}})}}:{...m,message:{...g,content:v,role:f,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:h}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return tx(l,e)}function Gi(t){return JSON.stringify(t)}class Fr extends ai{static fromReadableStream(e){const n=new Fr(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const s=new Fr(null),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new Fr(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let jy=class extends U{parse(e,n){return ix(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Zc(r,e))}runFunctions(e,n){return e.stream?Fr.runFunctions(this._client,e,n):ii.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Fr.runTools(this._client,e,n):ii.runTools(this._client,e,n)}stream(e,n){return ai.createChatCompletion(this._client,e,n)}};class Vu extends U{constructor(){super(...arguments),this.completions=new jy(this._client)}}(function(t){t.Completions=jy})(Vu||(Vu={}));class $y extends U{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ny extends U{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ro extends U{constructor(){super(...arguments),this.sessions=new $y(this._client),this.transcriptionSessions=new Ny(this._client)}}Ro.Sessions=$y;Ro.TranscriptionSessions=Ny;class ed extends U{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,td,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class td extends ge{}ed.MessagesPage=td;class nd extends U{retrieve(e,n,r,s={},i){return re(s)?this.retrieve(e,n,r,{},s):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n,r={},s){return re(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,rd,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class rd extends ge{}nd.RunStepsPage=rd;let wi=class extends U{constructor(){super(...arguments),this.steps=new nd(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,sd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}createAndStream(e,n,r){return yt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await gi(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return yt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,s){const i=await this.submitToolOutputs(e,n,r,s);return await this.poll(e,i.id,s)}submitToolOutputsStream(e,n,r,s){return yt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,s)}};class sd extends ge{}wi.RunsPage=sd;wi.Steps=nd;wi.RunStepsPage=rd;class es extends U{constructor(){super(...arguments),this.runs=new wi(this._client),this.messages=new ed(this._client)}create(e={},n){return re(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return yt.createThreadAssistantStream(e,this._client.beta.threads,n)}}es.Runs=wi;es.RunsPage=sd;es.Messages=ed;es.MessagesPage=td;class ts extends U{constructor(){super(...arguments),this.realtime=new Ro(this._client),this.chat=new Vu(this._client),this.assistants=new Qc(this._client),this.threads=new es(this._client)}}ts.Realtime=Ro;ts.Assistants=Qc;ts.AssistantsPage=Xc;ts.Threads=es;class Ly extends U{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Uy extends U{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let Oo=class extends U{constructor(){super(...arguments),this.content=new Uy(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,qn({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,id,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class id extends ge{}Oo.FileListResponsesPage=id;Oo.Content=Uy;class _i extends U{constructor(){super(...arguments),this.files=new Oo(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/containers",ad,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class ad extends ge{}_i.ContainerListResponsesPage=ad;_i.Files=Oo;_i.FileListResponsesPage=id;class Dy extends U{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&gn("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(gn("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=Zk(l)}),a)))}}class od extends U{retrieve(e,n,r,s){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,s)}list(e,n,r={},s){return re(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,ld,{query:r,...s})}}class ld extends ge{}od.OutputItemListResponsesPage=ld;class Si extends U{constructor(){super(...arguments),this.outputItems=new od(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,ud,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class ud extends ge{}Si.RunListResponsesPage=ud;Si.OutputItems=od;Si.OutputItemListResponsesPage=ld;class Ei extends U{constructor(){super(...arguments),this.runs=new Si(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/evals",cd,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class cd extends ge{}Ei.EvalListResponsesPage=cd;Ei.Runs=Si;Ei.RunListResponsesPage=ud;let dd=class extends U{create(e,n){return this._client.post("/files",qn({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/files",hd,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await gi(n),a=await this.retrieve(e),Date.now()-i>r)throw new qc({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class hd extends ge{}dd.FileObjectsPage=hd;class Fy extends U{}let My=class extends U{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class fd extends U{constructor(){super(...arguments),this.graders=new My(this._client)}}fd.Graders=My;class pd extends U{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,md,{body:n,method:"post",...r})}retrieve(e,n={},r){return re(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class md extends xo{}pd.PermissionCreateResponsesPage=md;let Ao=class extends U{constructor(){super(...arguments),this.permissions=new pd(this._client)}};Ao.Permissions=pd;Ao.PermissionCreateResponsesPage=md;class gd extends U{list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,yd,{query:n,...r})}}class yd extends ge{}gd.FineTuningJobCheckpointsPage=yd;class ns extends U{constructor(){super(...arguments),this.checkpoints=new gd(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",vd,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return re(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,wd,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class vd extends ge{}class wd extends ge{}ns.FineTuningJobsPage=vd;ns.FineTuningJobEventsPage=wd;ns.Checkpoints=gd;ns.FineTuningJobCheckpointsPage=yd;class kn extends U{constructor(){super(...arguments),this.methods=new Fy(this._client),this.jobs=new ns(this._client),this.checkpoints=new Ao(this._client),this.alpha=new fd(this._client)}}kn.Methods=Fy;kn.Jobs=ns;kn.FineTuningJobsPage=vd;kn.FineTuningJobEventsPage=wd;kn.Checkpoints=Ao;kn.Alpha=fd;class By extends U{}class _d extends U{constructor(){super(...arguments),this.graderModels=new By(this._client)}}_d.GraderModels=By;class zy extends U{createVariation(e,n){return this._client.post("/images/variations",qn({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",qn({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Sd extends U{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ed,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Ed extends xo{}Sd.ModelsPage=Ed;class Wy extends U{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function hx(t,e){return!e||!px(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Hy(t,e)}function Hy(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:yx(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:fx(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Vy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function fx(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function px(t){var e;return!!Yc((e=t.text)==null?void 0:e.format)}function mx(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function gx(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function yx(t,e){const n=gx(t.tools??[],e.name);return{...e,...e,parsed_arguments:mx(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Vy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class qy extends U{list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,wx,{query:n,...r})}}var dr=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Jt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},hr,Qi,Gt,Xi,If,jf,$f,Nf;class kd extends Gc{constructor(e){super(),hr.add(this),Qi.set(this,void 0),Gt.set(this,void 0),Xi.set(this,void 0),dr(this,Qi,e,"f")}static createResponse(e,n,r){const s=new kd(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Jt(this,hr,"m",If).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of i)Jt(this,hr,"m",jf).call(this,l,a);if((o=i.controller.signal)!=null&&o.aborted)throw new rt;return Jt(this,hr,"m",$f).call(this)}[(Qi=new WeakMap,Gt=new WeakMap,Xi=new WeakMap,hr=new WeakSet,If=function(){this.ended||dr(this,Gt,void 0,"f")},jf=function(n,r){if(this.ended)return;const s=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},i=Jt(this,hr,"m",Nf).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new L(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new L(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new L(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new L(`missing output at index ${n.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:s(n.type,n);break}},$f=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const n=Jt(this,Gt,"f");if(!n)throw new L("request ended without sending any events");dr(this,Gt,void 0,"f");const r=vx(n,Jt(this,Qi,"f"));return dr(this,Xi,r,"f"),r},Nf=function(n){let r=Jt(this,Gt,"f");if(!r){if(n.type!=="response.created")throw new L(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=dr(this,Gt,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new L(`missing output at index ${n.output_index}`);s.type==="message"&&s.content.push(n.part);break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new L(`missing output at index ${n.output_index}`);if(s.type==="message"){const i=s.content[n.content_index];if(!i)throw new L(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new L(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new L(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.completed":{dr(this,Gt,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Jt(this,Xi,"f");if(!e)throw new L("stream ended without producing a ChatCompletion");return e}}function vx(t,e){return hx(t,e)}class xd extends U{constructor(){super(...arguments),this.inputItems=new qy(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Vy(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Hy(r,e))}stream(e,n){return kd.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class wx extends ge{}xd.InputItems=qy;class Ky extends U{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,qn({body:n,...r}))}}class bd extends U{constructor(){super(...arguments),this.parts=new Ky(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}bd.Parts=Ky;const _x=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class To extends U{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return re(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Io,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,n,{...r,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await gi(o);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Cd,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Io extends ge{}class Cd extends xo{}To.VectorStoreFilesPage=Io;To.FileContentResponsesPage=Cd;class Jy extends U{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r={},s){return re(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Io,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await gi(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,a=Math.min(i,n.length),o=this._client,l=n.values(),u=[...r];async function c(h){for(let m of h){const v=await o.files.create({file:m,purpose:"assistants"},s);u.push(v.id)}}const d=Array(a).fill(l).map(c);return await _x(d),await this.createAndPoll(e,{file_ids:u})}}class xn extends U{constructor(){super(...arguments),this.files=new To(this._client),this.fileBatches=new Jy(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return re(e)?this.list({},e):this._client.getAPIList("/vector_stores",Pd,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Rd,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Pd extends ge{}class Rd extends xo{}xn.VectorStoresPage=Pd;xn.VectorStoreSearchResponsesPage=Rd;xn.Files=To;xn.VectorStoreFilesPage=Io;xn.FileContentResponsesPage=Cd;xn.FileBatches=Jy;var Gy;class M extends Bk{constructor({baseURL:e=Vi("OPENAI_BASE_URL"),apiKey:n=Vi("OPENAI_API_KEY"),organization:r=Vi("OPENAI_ORG_ID")??null,project:s=Vi("OPENAI_PROJECT_ID")??null,...i}={}){if(n===void 0)throw new L("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:s,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Xk())throw new L(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new Ly(this),this.chat=new Po(this),this.embeddings=new Dy(this),this.files=new dd(this),this.images=new zy(this),this.audio=new yi(this),this.moderations=new Wy(this),this.models=new Sd(this),this.fineTuning=new kn(this),this.graders=new _d(this),this.vectorStores=new xn(this),this.beta=new ts(this),this.batches=new Kc(this),this.uploads=new bd(this),this.responses=new xd(this),this.evals=new Ei(this),this.containers=new _i(this),this._options=a,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return kk(e,{arrayFormat:"brackets"})}}Gy=M;M.OpenAI=Gy;M.DEFAULT_TIMEOUT=6e5;M.OpenAIError=L;M.APIError=be;M.APIConnectionError=_o;M.APIConnectionTimeoutError=qc;M.APIUserAbortError=rt;M.NotFoundError=Kg;M.ConflictError=Jg;M.RateLimitError=Qg;M.BadRequestError=Hg;M.AuthenticationError=Vg;M.InternalServerError=Xg;M.PermissionDeniedError=qg;M.UnprocessableEntityError=Gg;M.toFile=ry;M.fileFromPath=Bg;M.Completions=Ly;M.Chat=Po;M.ChatCompletionsPage=Co;M.Embeddings=Dy;M.Files=dd;M.FileObjectsPage=hd;M.Images=zy;M.Audio=yi;M.Moderations=Wy;M.Models=Sd;M.ModelsPage=Ed;M.FineTuning=kn;M.Graders=_d;M.VectorStores=xn;M.VectorStoresPage=Pd;M.VectorStoreSearchResponsesPage=Rd;M.Beta=ts;M.Batches=Kc;M.BatchesPage=Jc;M.Uploads=bd;M.Responses=xd;M.Evals=Ei;M.EvalListResponsesPage=cd;M.Containers=_i;M.ContainerListResponsesPage=ad;const Sx=void 0;console.warn("OpenAI API key not configured. AI features will not work.");const Qy=new M({apiKey:Sx,dangerouslyAllowBrowser:!0});async function Xy(t){var n,r;return((r=(n=(await Qy.images.generate({model:"dall-e-3",prompt:`Create a beautiful invitation card background with the following theme: ${t}. The image should be elegant, suitable for an invitation card, and leave space for text overlay.`,n:1,size:"1024x1024",quality:"standard"})).data)==null?void 0:n[0])==null?void 0:r.url)||""}async function Yy(t,e,n){const r={square:{width:800,height:800},landscape:{width:1e3,height:600},portrait:{width:600,height:1e3}},{width:s,height:i}=r[e],o=(await Qy.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:`You are an expert graphic designer specializing in invitation card layouts. Analyze the invitation text and suggest optimal text placement, sizing, and styling that will be clearly visible and aesthetically pleasing on the background.

CRITICAL REQUIREMENTS:
1. Ensure high contrast text colors (usually white or black with proper shadows/outlines if needed)
2. Break text into logical sections (heading, body, details, etc.)
3. Use appropriate font sizes - headings should be larger (40-60px), body text medium (20-30px), details smaller (16-20px)
4. Position text to avoid likely busy areas based on background description
5. Center important elements for visual balance
6. Leave adequate margins (at least 50px from edges)

Return ONLY valid JSON in this exact format:
{
  "elements": [
    {
      "content": "text content",
      "x": 100,
      "y": 100,
      "width": 600,
      "fontSize": 48,
      "fontWeight": "bold",
      "color": "#ffffff",
      "textAlign": "center",
      "fontFamily": "serif"
    }
  ],
  "reasoning": "Brief explanation of design choices"
}`},{role:"user",content:`Card Dimensions: ${s}x${i}px (${e})
Background Theme: ${n}

Invitation Text to Layout:
${t}

Provide optimal text layout with clear visibility and elegant design.`}],temperature:.7})).choices[0].message.content||"{}";try{return JSON.parse(o)}catch{throw console.error("Failed to parse GPT response:",o),new Error("Failed to analyze text placement")}}function Ex({dimension:t,backgroundImageUrl:e,backgroundPrompt:n,invitationText:r,initialTextElements:s,onBack:i}){const{user:a}=wo(),[o,l]=b.useState(e),[u,c]=b.useState(s),[d,h]=b.useState(null),[m,v]=b.useState(null),[y,w]=b.useState({x:0,y:0}),[g,f]=b.useState(!1),[p,_]=b.useState(!1),x=b.useRef(null),k={square:{width:800,height:800},landscape:{width:1e3,height:600},portrait:{width:600,height:1e3}},{width:E,height:R}=k[t],$=(P,D)=>{P.stopPropagation(),v(D),h(D),w({x:P.clientX,y:P.clientY})},T=P=>{if(!m)return;const D=P.clientX-y.x,ye=P.clientY-y.y;c(H=>H.map(We=>We.id===m?{...We,x:Math.max(0,Math.min(E-We.width,We.x+D)),y:Math.max(0,Math.min(R-50,We.y+ye))}:We)),w({x:P.clientX,y:P.clientY})},z=()=>{v(null)},ae=(P,D)=>{c(ye=>ye.map(H=>H.id===P?{...H,...D}:H))},lt=P=>{c(D=>D.filter(ye=>ye.id!==P)),h(null)},Yn=()=>{const P={id:`text-${Date.now()}`,content:"New Text",x:E/2-100,y:R/2,width:200,fontSize:24,fontWeight:"normal",color:"#ffffff",textAlign:"center",fontFamily:"sans-serif"};c([...u,P]),h(P.id)},Zn=async()=>{if(confirm("Regenerate background? This will create a new design with the same prompt. Your text elements will remain unchanged.")){_(!0);try{const P=await Xy(n);l(P)}catch(P){console.error("Regenerate error:",P),alert("Failed to regenerate background. Please try again.")}finally{_(!1)}}},rs=async()=>{if(confirm("Re-analyze text placement? This will reset all text elements based on AI analysis.")){_(!0);try{const D=(await Yy(r,t,n)).elements.map((ye,H)=>({...ye,id:`text-${H}-${Date.now()}`}));c(D),h(null)}catch(P){console.error("Re-analyze error:",P),alert("Failed to re-analyze text placement. Please try again.")}finally{_(!1)}}},er=async()=>{const P=document.createElement("canvas");P.width=E,P.height=R;const D=P.getContext("2d"),ye=new Image;return ye.crossOrigin="anonymous",await new Promise((H,We)=>{ye.onload=H,ye.onerror=We,ye.src=o}),D.drawImage(ye,0,0,E,R),u.forEach(H=>{D.font=`${H.fontWeight} ${H.fontSize}px ${H.fontFamily}`,D.fillStyle=H.color,D.textAlign=H.textAlign,H.content.split(`
`).forEach((Tt,tr)=>{const Zy=H.textAlign==="center"?H.x+H.width/2:H.textAlign==="right"?H.x+H.width:H.x;D.fillText(Tt,Zy,H.y+tr*H.fontSize*1.2)})}),P.toDataURL("image/png")},O=async()=>{if(!a){alert("Please sign in to save your card");return}f(!0);try{const P=await er(),{error:D}=await nn.from("invitation_cards").insert({user_id:a.id,title:"My Invitation Card",dimension:t,background_prompt:n,background_image_url:o,invitation_text:r,text_elements:u,card_data_url:P,is_public:!1});if(D)throw D;alert("Card saved successfully!")}catch(P){console.error("Save error:",P),alert("Failed to save card")}finally{f(!1)}},B=async()=>{try{const P=await er(),D=document.createElement("a");D.download="invitation-card.png",D.href=P,D.click()}catch(P){console.error("Download error:",P),alert("Failed to download card")}},I=u.find(P=>P.id===d);return S.jsxs("div",{className:"card-editor",children:[S.jsxs("div",{className:"editor-header",children:[S.jsx("button",{className:"back-btn",onClick:i,children:" Back"}),S.jsx("h2",{children:"Edit Your Card"}),S.jsxs("div",{className:"header-actions",children:[S.jsx("button",{className:"regenerate-btn",onClick:Zn,disabled:p,children:p?"Regenerating...":" Regenerate Background"}),S.jsx("button",{className:"reanalyze-btn",onClick:rs,disabled:p,children:p?"Analyzing...":" Re-analyze Text"}),a&&S.jsx("button",{className:"save-btn",onClick:O,disabled:g,children:g?"Saving...":"Save to Gallery"}),S.jsx("button",{className:"download-btn",onClick:B,children:"Download"})]})]}),S.jsxs("div",{className:"editor-content",children:[S.jsx("div",{className:"canvas-area",children:S.jsx("div",{ref:x,className:"canvas",style:{width:`${E}px`,height:`${R}px`,backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center"},onMouseMove:T,onMouseUp:z,onMouseLeave:z,onClick:()=>h(null),children:u.map(P=>S.jsx("div",{className:`text-element ${d===P.id?"selected":""}`,style:{position:"absolute",left:`${P.x}px`,top:`${P.y}px`,width:`${P.width}px`,fontSize:`${P.fontSize}px`,fontWeight:P.fontWeight,color:P.color,textAlign:P.textAlign,fontFamily:P.fontFamily,cursor:m===P.id?"grabbing":"grab",whiteSpace:"pre-wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},onMouseDown:D=>$(D,P.id),children:P.content},P.id))})}),S.jsxs("div",{className:"properties-panel",children:[S.jsx("h3",{children:"Text Properties"}),S.jsx("button",{className:"add-text-btn",onClick:Yn,children:"+ Add Text Element"}),I?S.jsxs("div",{className:"properties",children:[S.jsxs("div",{className:"property",children:[S.jsx("label",{children:"Content"}),S.jsx("textarea",{value:I.content,onChange:P=>ae(I.id,{content:P.target.value}),rows:3})]}),S.jsxs("div",{className:"property",children:[S.jsxs("label",{children:["Font Size: ",I.fontSize,"px"]}),S.jsx("input",{type:"range",min:"12",max:"100",value:I.fontSize,onChange:P=>ae(I.id,{fontSize:Number(P.target.value)})})]}),S.jsxs("div",{className:"property",children:[S.jsxs("label",{children:["Width: ",I.width,"px"]}),S.jsx("input",{type:"range",min:"100",max:E,value:I.width,onChange:P=>ae(I.id,{width:Number(P.target.value)})})]}),S.jsxs("div",{className:"property",children:[S.jsx("label",{children:"Font Weight"}),S.jsxs("select",{value:I.fontWeight,onChange:P=>ae(I.id,{fontWeight:P.target.value}),children:[S.jsx("option",{value:"normal",children:"Normal"}),S.jsx("option",{value:"bold",children:"Bold"}),S.jsx("option",{value:"lighter",children:"Light"})]})]}),S.jsxs("div",{className:"property",children:[S.jsx("label",{children:"Text Align"}),S.jsxs("select",{value:I.textAlign,onChange:P=>ae(I.id,{textAlign:P.target.value}),children:[S.jsx("option",{value:"left",children:"Left"}),S.jsx("option",{value:"center",children:"Center"}),S.jsx("option",{value:"right",children:"Right"})]})]}),S.jsxs("div",{className:"property",children:[S.jsx("label",{children:"Color"}),S.jsx("input",{type:"color",value:I.color,onChange:P=>ae(I.id,{color:P.target.value})})]}),S.jsxs("div",{className:"property",children:[S.jsx("label",{children:"Font Family"}),S.jsxs("select",{value:I.fontFamily,onChange:P=>ae(I.id,{fontFamily:P.target.value}),children:[S.jsx("option",{value:"sans-serif",children:"Sans Serif"}),S.jsx("option",{value:"serif",children:"Serif"}),S.jsx("option",{value:"monospace",children:"Monospace"}),S.jsx("option",{value:"cursive",children:"Cursive"})]})]}),S.jsx("button",{className:"delete-btn",onClick:()=>lt(I.id),children:"Delete Element"})]}):S.jsx("p",{className:"no-selection",children:"Click on a text element to edit its properties"})]})]})]})}function kx(){const[t,e]=b.useState("square"),[n,r]=b.useState(""),[s,i]=b.useState(""),[a,o]=b.useState(!1),[l,u]=b.useState(""),[c,d]=b.useState("input"),[h,m]=b.useState(""),[v,y]=b.useState([]),w={square:{width:800,height:800,label:"Square (800800)"},landscape:{width:1e3,height:600,label:"Landscape (1000600)"},portrait:{width:600,height:1e3,label:"Portrait (6001000)"}},g=async()=>{if(!n.trim()||!s.trim()){u("Please fill in all fields");return}o(!0),u("");try{const p=await Xy(n);m(p);const x=(await Yy(s,t,n)).elements.map((k,E)=>({...k,id:`text-${E}-${Date.now()}`}));y(x),d("editor")}catch(p){u(p instanceof Error?p.message:"Failed to generate card. Please check your OpenAI API key."),console.error("Generation error:",p)}finally{o(!1)}},f=()=>{d("input")};return c==="editor"?S.jsx(Ex,{dimension:t,backgroundImageUrl:h,backgroundPrompt:n,invitationText:s,initialTextElements:v,onBack:f}):S.jsx("div",{className:"card-creator",children:S.jsxs("div",{className:"creator-container",children:[S.jsx("h1",{children:"AI Invitation Card Maker"}),S.jsx("p",{className:"subtitle",children:"Create beautiful invitation cards with AI-powered design"}),S.jsxs("div",{className:"form-section",children:[S.jsx("label",{children:"Card Dimension"}),S.jsx("div",{className:"dimension-selector",children:Object.keys(w).map(p=>S.jsxs("button",{className:`dimension-btn ${t===p?"active":""}`,onClick:()=>e(p),children:[S.jsxs("span",{className:"dim-icon",children:[p==="square"&&"",p==="landscape"&&"",p==="portrait"&&""]}),S.jsx("span",{className:"dim-label",children:w[p].label})]},p))})]}),S.jsxs("div",{className:"form-section",children:[S.jsx("label",{htmlFor:"background-prompt",children:"Background Design Prompt"}),S.jsx("textarea",{id:"background-prompt",placeholder:"e.g., Elegant floral design with gold accents, soft pink background, romantic wedding theme",value:n,onChange:p=>r(p.target.value),rows:3})]}),S.jsxs("div",{className:"form-section",children:[S.jsx("label",{htmlFor:"invitation-text",children:"Invitation Text"}),S.jsx("textarea",{id:"invitation-text",placeholder:"e.g., You are cordially invited to celebrate the wedding of Sarah & John, Saturday, June 15th, 2024, 4:00 PM, Garden Venue",value:s,onChange:p=>i(p.target.value),rows:6})]}),l&&S.jsx("div",{className:"error-message",children:l}),S.jsx("button",{className:"generate-btn",onClick:g,disabled:a,children:a?"Generating...":"Generate Card with AI"}),S.jsxs("div",{className:"info-box",children:[S.jsx("strong",{children:"How it works:"}),S.jsxs("ol",{children:[S.jsx("li",{children:"Choose your card dimension"}),S.jsx("li",{children:"Describe the background design you want"}),S.jsx("li",{children:"Enter your invitation text"}),S.jsx("li",{children:"AI will generate the background and intelligently place your text"}),S.jsx("li",{children:"Edit, save, and download your card"})]})]})]})})}function xx(){const{user:t}=wo(),[e,n]=b.useState([]),[r,s]=b.useState(!0);b.useEffect(()=>{i()},[t]);const i=async()=>{if(!t){n([]),s(!1);return}s(!0);try{const{data:l,error:u}=await nn.from("invitation_cards").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(u)throw u;n(l||[])}catch(l){console.error("Load cards error:",l)}finally{s(!1)}},a=async l=>{if(confirm("Are you sure you want to delete this card?"))try{const{error:u}=await nn.from("invitation_cards").delete().eq("id",l);if(u)throw u;n(e.filter(c=>c.id!==l))}catch(u){console.error("Delete error:",u),alert("Failed to delete card")}},o=l=>{if(!l.card_data_url)return;const u=document.createElement("a");u.download=`${l.title}.png`,u.href=l.card_data_url,u.click()};return t?r?S.jsx("div",{className:"gallery",children:S.jsxs("div",{className:"gallery-container",children:[S.jsx("h1",{children:"Gallery"}),S.jsx("p",{children:"Loading your cards..."})]})}):e.length===0?S.jsx("div",{className:"gallery",children:S.jsxs("div",{className:"gallery-container",children:[S.jsx("h1",{children:"Gallery"}),S.jsxs("div",{className:"empty-state",children:[S.jsx("p",{children:"You haven't created any cards yet"}),S.jsx("p",{children:"Start creating beautiful invitation cards!"})]})]})}):S.jsx("div",{className:"gallery",children:S.jsxs("div",{className:"gallery-container",children:[S.jsx("h1",{children:"Gallery"}),S.jsxs("p",{className:"gallery-subtitle",children:[e.length," card",e.length!==1?"s":""," saved"]}),S.jsx("div",{className:"cards-grid",children:e.map(l=>S.jsxs("div",{className:"card-item",children:[S.jsx("div",{className:"card-preview",children:l.card_data_url?S.jsx("img",{src:l.card_data_url,alt:l.title}):S.jsx("div",{className:"no-preview",children:"No preview available"})}),S.jsxs("div",{className:"card-info",children:[S.jsx("h3",{children:l.title}),S.jsx("p",{className:"card-dimension",children:l.dimension}),S.jsx("p",{className:"card-date",children:new Date(l.created_at).toLocaleDateString()})]}),S.jsxs("div",{className:"card-actions",children:[S.jsx("button",{onClick:()=>o(l),children:"Download"}),S.jsx("button",{onClick:()=>a(l.id),className:"delete",children:"Delete"})]})]},l.id))})]})}):S.jsx("div",{className:"gallery",children:S.jsxs("div",{className:"gallery-container",children:[S.jsx("h1",{children:"Gallery"}),S.jsx("div",{className:"empty-state",children:S.jsx("p",{children:"Please sign in to view your saved cards"})})]})})}function bx({onClose:t}){const{signIn:e,signUp:n}=wo(),[r,s]=b.useState("signin"),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,c]=b.useState(!1),[d,h]=b.useState(""),m=async v=>{v.preventDefault(),h(""),c(!0);try{r==="signin"?await e(i,o):await n(i,o),t()}catch(y){h(y instanceof Error?y.message:"Authentication failed")}finally{c(!1)}};return S.jsxs("div",{className:"auth-modal",children:[S.jsx("div",{className:"auth-backdrop",onClick:t}),S.jsxs("div",{className:"auth-content",children:[S.jsx("button",{className:"close-btn",onClick:t,children:""}),S.jsx("h2",{children:r==="signin"?"Sign In":"Sign Up"}),S.jsxs("form",{onSubmit:m,children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"email",children:"Email"}),S.jsx("input",{id:"email",type:"email",value:i,onChange:v=>a(v.target.value),required:!0,placeholder:"your@email.com"})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"password",children:"Password"}),S.jsx("input",{id:"password",type:"password",value:o,onChange:v=>l(v.target.value),required:!0,placeholder:"",minLength:6})]}),d&&S.jsx("div",{className:"error-message",children:d}),S.jsx("button",{type:"submit",className:"submit-btn",disabled:u,children:u?"Loading...":r==="signin"?"Sign In":"Sign Up"})]}),S.jsx("div",{className:"auth-switch",children:r==="signin"?S.jsxs("p",{children:["Don't have an account?"," ",S.jsx("button",{onClick:()=>s("signup"),children:"Sign Up"})]}):S.jsxs("p",{children:["Already have an account?"," ",S.jsx("button",{onClick:()=>s("signin"),children:"Sign In"})]})})]})]})}function Cx(){const{user:t,signOut:e}=wo(),[n,r]=b.useState(!1);return S.jsxs(S.Fragment,{children:[S.jsx("nav",{className:"navbar",children:S.jsxs("div",{className:"nav-container",children:[S.jsx(al,{to:"/",className:"nav-brand",children:"AI Card Maker"}),S.jsxs("div",{className:"nav-links",children:[S.jsx(al,{to:"/",children:"Create"}),S.jsx(al,{to:"/gallery",children:"Gallery"}),t?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"user-email",children:t.email}),S.jsx("button",{onClick:e,className:"nav-btn",children:"Sign Out"})]}):S.jsx("button",{onClick:()=>r(!0),className:"nav-btn",children:"Sign In"})]})]})}),n&&S.jsx(bx,{onClose:()=>r(!1)})]})}function Px(){return S.jsx(R0,{children:S.jsxs("div",{className:"app",children:[S.jsx(Cx,{}),S.jsx("main",{children:S.jsxs(S0,{children:[S.jsx(wu,{path:"/",element:S.jsx(kx,{})}),S.jsx(wu,{path:"/gallery",element:S.jsx(xx,{})})]})})]})})}function Rx(){return S.jsx(fk,{children:S.jsx(Px,{})})}bl.createRoot(document.getElementById("root")).render(S.jsx(qf.StrictMode,{children:S.jsx(Rx,{})}));
